import{s as S,j as s,a as h,F as $}from"./index-cd3385ec.js";import{c as f}from"./index-8497cc1c.js";import{C as g,S as R}from"./Feedback-835da1b8.js";import{c as C}from"./theme-8fe185ce.js";const p="ABCDEFGHIJKLMNOPQRSTUVWXYZ",F="1.0",E=function(e,r){if(!(e.id||r))return e.isCorrect;let t=e.id===r;return e.correctness!=null&&(t=e.correctness===F),t},v=(e,r)=>e.id===r,T=(e,r)=>e.id==r;function X(e){const t=e.trim().match(/\b[-?(\w+)?]+\b/gi);return t?t.length:0}const z=e=>typeof e=="string"?parseInt(e,10):e,P=S.div`
  color: ${e=>e.state?C.answer.correct:C.answer.incorrect};
  text-transform: uppercase;
  font-size: calc(1.1rem * var(--content-text-scale));
  font-weight: bold;
`,j=({hasCorrectAnswer:e,isCorrect:r,isIncorrect:t,isSelected:n})=>!r&&!t&&(!n||!e)?null:s(P,{state:!!r,children:s("span",{children:`${r?"Correct":"Incorrect"} Answer`})}),I=e=>{const{answer:{content_html:r,feedback_html:t},contentRenderer:n,labelAnswers:a,show_all_feedback:i,tableFeedbackEnabled:c,hasCorrectAnswer:l,isCorrect:o,isIncorrect:d,isSelected:w}=e;return h("div",{className:"answer-answer",role:"status","aria-live":"polite","aria-atomic":"true",children:[a!==!1&&s(j,{hasCorrectAnswer:l,isCorrect:o,isIncorrect:d,isSelected:w}),s(g,{className:"answer-content",component:n,html:r}),i&&t&&!c&&s(R,{contentRenderer:n,children:t},"question-mc-feedback")]})},B=e=>{const{answer:r,answered_count:t,isCorrect:n,contentRenderer:a,iter:i,show_all_feedback:c,tableFeedbackEnabled:l}=e,o=r.selected_count&&t?Math.round(r.selected_count/t*100):0;return h("div",{className:"review-wrapper",children:[h("div",{className:f("review-count",{green:n,red:!n}),children:[s("span",{className:"selected-count","data-percent":`${o}`,children:r.selected_count}),s("span",{className:f("letter",{green:n,red:!n}),children:p[i]})]}),s(I,{answer:r,contentRenderer:a,show_all_feedback:c,tableFeedbackEnabled:l})]})},L=e=>{const{type:r,iter:t,answer:n,disabled:a,onKeyPress:i,qid:c,contentRenderer:l,correctIncorrectIcon:o,feedbackId:d,isSelected:w,isCorrect:m,isIncorrect:b,hasCorrectAnswer:A,show_all_feedback:N,tableFeedbackEnabled:k,labelAnswers:_=!0}=e,x=`${w?"Selected ":""}Choice ${p[t]}:`;let u;const y=()=>u&&u(n);return!A&&r!=="teacher-review"&&r!=="teacher-preview"&&r!=="student-mpp"&&({onChangeAnswer:u}=e),h($,{children:[r==="teacher-preview"&&s("div",{className:"correct-incorrect",children:m&&o}),s("input",{type:"radio",className:"answer-input-box",checked:w,id:`${c}-option-${t}`,name:`${c}-options`,onChange:y,disabled:a||!u,"aria-details":d}),h("label",{onKeyPress:i,htmlFor:`${c}-option-${t}`,className:"answer-label",children:[s("span",{className:"answer-letter-wrapper","aria-label":x,"data-answer-choice":p[t],"data-test-id":`answer-choice-${p[t]}`}),s(I,{answer:n,contentRenderer:l,labelAnswers:_,show_all_feedback:N,tableFeedbackEnabled:k,hasCorrectAnswer:A,isCorrect:m,isIncorrect:b,isSelected:w})]})]})},M=e=>e.type==="teacher-review"?s(B,{...e}):s(L,{...e}),O=e=>{const{type:r,answer:t,disabled:n,answerId:a,correctAnswerId:i,incorrectAnswerId:c}=e,l=T(t,a),o=E(t,i),d=v(t,c),m=l||a===void 0&&(!c&&o||d),b=f("answers-answer",{disabled:n,"answer-selected":m,"answer-correct":o&&r!=="student-mpp","answer-incorrect":c&&v(t,c)});return s("div",{className:"openstax-answer",children:s("section",{className:b,children:s(M,{...e,isCorrect:o,isSelected:m,isIncorrect:d})})})};O.displayName="OSAnswer";export{O as A,X as c,z as n};
