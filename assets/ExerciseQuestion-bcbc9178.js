import{R as l,a as n,j as t,F as U}from"./index-3984dcc0.js";import{n as D}from"./Answer-0c345b87.js";import{B as w}from"./Button-ad25cd8c.js";import{C as O}from"./Feedback-6a7f64be.js";import{a as T}from"./Question-b48e043e.js";import{S as z}from"./StepCardFooter-2c333d81.js";const G=({count:e})=>n("div",{children:[e," attempt",e===1?"":"s"," left"]}),H=({published_comments:e})=>e?n("div",{children:[t("strong",{children:"Feedback:"})," ",e]}):null,J=e=>t(w,{...e,waitingText:"Savingâ€¦",isWaiting:e.isWaiting,"data-test-id":"submit-answer-btn",children:e.willContinue?"Submit & continue":e.attempt_number==0?"Submit":"Re-submit"}),K=e=>t(w,{...e,"data-test-id":"continue-btn",children:e.canUpdateCurrentStep?"Continue":"Next"}),L=({free_response:e})=>e?t(U,{children:t("div",{className:"free-response",children:e})}):null,te=l.forwardRef((e,_)=>{const{question:c,task:v,answer_id_order:C,onAnswerChange:S,feedback_html:g,correct_answer_feedback_html:N,is_completed:a,correct_answer_id:k,incorrectAnswerId:x,choicesEnabled:A,questionNumber:i,answer_id:u,hasMultipleAttempts:F,attempts_remaining:m,published_comments:R,detailedSolution:r,canAnswer:E,needsSaved:y,attempt_number:B,apiIsPending:h,onAnswerSave:I,onNextStep:o,canUpdateCurrentStep:j,displaySolution:q,available_points:f,free_response:P,labelAnswers:W,show_all_feedback:M,tableFeedbackEnabled:Q,hasFeedback:p,previewMode:d}=e,[s,b]=l.useState(!1);return l.useEffect(()=>{s&&a&&(o(i-1),b(!1))},[o,i,s,a]),n("div",{"data-test-id":"student-exercise-question",children:[t(T,{ref:_,task:v,question:c,answerIdOrder:C,choicesEnabled:A,answer_id:u,questionNumber:i,onChange:S,feedback_html:g,correct_answer_feedback_html:N,correct_answer_id:a?k:null,incorrectAnswerId:x,className:"step-card-body",hideAnswers:!1,displayFormats:!1,displaySolution:q,labelAnswers:W,show_all_feedback:M,tableFeedbackEnabled:Q,previewMode:d,children:t(L,{free_response:P})}),d&&r||!d?t(z,{className:"step-card-footer",children:n("div",{className:"step-card-footer-inner",children:[n("div",{className:"points",role:"status",children:[f?n("strong",{children:["Points: ",f]}):null,t("span",{className:"attempts-left",children:F&&m>0&&t(G,{count:m})}),t(H,{published_comments:R}),r&&n("div",{children:[t("strong",{children:"Detailed solution:"})," ",t(O,{html:r})]})]}),t("div",{className:"controls",children:E&&y||s?t(J,{disabled:h||!u||s,isWaiting:h||s,attempt_number:B,onClick:()=>{I(D(c.id)),p||b(!0)},willContinue:!p}):t(K,{onClick:()=>o(i-1),canUpdateCurrentStep:j})})]})}):null]})});export{te as E};
