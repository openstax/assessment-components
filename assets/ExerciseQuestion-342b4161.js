import{R as l,a as n,j as t,F as Q}from"./index-8a93527d.js";import{n as U}from"./Answer-c33b5245.js";import{B as w}from"./Button-088ab4e9.js";import{C as D}from"./Feedback-18277fb3.js";import{a as O}from"./Question-0a21c7c3.js";import{S as T}from"./StepCardFooter-cc3a91e5.js";const z=({count:e})=>n("div",{children:[e," attempt",e===1?"":"s"," left"]}),G=({published_comments:e})=>e?n("div",{children:[t("strong",{children:"Feedback:"})," ",e]}):null,H=e=>t(w,{...e,waitingText:"Savingâ€¦",isWaiting:e.isWaiting,"data-test-id":"submit-answer-btn",children:e.willContinue?"Submit & continue":e.attempt_number==0?"Submit":"Re-submit"}),J=e=>t(w,{...e,"data-test-id":"continue-btn",children:e.canUpdateCurrentStep?"Continue":"Next"}),K=({free_response:e})=>e?t(Q,{children:t("div",{className:"free-response",children:e})}):null,ee=l.forwardRef((e,_)=>{const{question:c,task:v,answer_id_order:C,onAnswerChange:S,feedback_html:g,correct_answer_feedback_html:N,is_completed:a,correct_answer_id:k,incorrectAnswerId:x,choicesEnabled:F,questionNumber:i,answer_id:u,hasMultipleAttempts:A,attempts_remaining:m,published_comments:R,detailedSolution:r,canAnswer:E,needsSaved:y,attempt_number:B,apiIsPending:h,onAnswerSave:I,onNextStep:o,canUpdateCurrentStep:j,displaySolution:q,available_points:f,free_response:P,show_all_feedback:W,tableFeedbackEnabled:M,hasFeedback:p,previewMode:d}=e,[s,b]=l.useState(!1);return l.useEffect(()=>{s&&a&&(o(i-1),b(!1))},[o,i,s,a]),n("div",{"data-test-id":"student-exercise-question",children:[t(O,{ref:_,task:v,question:c,answerIdOrder:C,choicesEnabled:F,answer_id:u,questionNumber:i,onChange:S,feedback_html:g,correct_answer_feedback_html:N,correct_answer_id:a?k:null,incorrectAnswerId:x,className:"step-card-body",hideAnswers:!1,displayFormats:!1,displaySolution:q,show_all_feedback:W,tableFeedbackEnabled:M,previewMode:d,children:t(K,{free_response:P})}),d&&r||!d?t(T,{className:"step-card-footer",children:n("div",{className:"step-card-footer-inner",children:[n("div",{className:"points",role:"status",children:[f?n("strong",{children:["Points: ",f]}):null,t("span",{className:"attempts-left",children:A&&m>0&&t(z,{count:m})}),t(G,{published_comments:R}),r&&n("div",{children:[t("strong",{children:"Detailed solution:"})," ",t(D,{html:r})]})]}),t("div",{className:"controls",children:E&&y||s?t(H,{disabled:h||!u||s,isWaiting:h||s,attempt_number:B,onClick:()=>{I(U(c.id)),p||b(!0)},willContinue:!p}):t(J,{onClick:()=>o(i-1),canUpdateCurrentStep:j})})]})}):null]})});export{ee as E};
