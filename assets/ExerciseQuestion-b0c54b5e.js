import{R as l,a as n,j as t}from"./index-adac3354.js";import{n as U}from"./Answer-0e1ff371.js";import{B as w}from"./Button-6b36f090.js";import{C as D}from"./Feedback-aa96548a.js";import{a as O}from"./Question-59ad54f6.js";import{S as T}from"./StepCardFooter-023c0db3.js";import{F as z}from"./FreeResponseReview-862c169d.js";const G=({count:e})=>n("div",{children:[e," attempt",e===1?"":"s"," left"]}),H=({published_comments:e})=>e?n("div",{children:[t("strong",{children:"Feedback:"})," ",e]}):null,J=e=>t(w,{...e,waitingText:"Savingâ€¦",isWaiting:e.isWaiting,"data-test-id":"submit-answer-btn",children:e.willContinue?"Submit & continue":e.attempt_number==0?"Submit":"Re-submit"}),K=e=>t(w,{...e,"data-test-id":"continue-btn",children:e.canUpdateCurrentStep?"Continue":"Next"}),te=l.forwardRef((e,S)=>{const{question:c,task:_,answer_id_order:g,onAnswerChange:C,feedback_html:v,correct_answer_feedback_html:N,is_completed:r,correct_answer_id:k,incorrectAnswerId:x,choicesEnabled:A,questionNumber:s,answer_id:u,hasMultipleAttempts:F,attempts_remaining:m,published_comments:R,detailedSolution:o,canAnswer:E,needsSaved:y,attempt_number:B,apiIsPending:h,onAnswerSave:I,onNextStep:d,canUpdateCurrentStep:j,displaySolution:q,available_points:f,free_response:P,labelAnswers:W,show_all_feedback:M,tableFeedbackEnabled:Q,hasFeedback:p,previewMode:a}=e,[i,b]=l.useState(!1);return l.useEffect(()=>{i&&r&&(d(s-1),b(!1))},[d,s,i,r]),n("div",{"data-test-id":"student-exercise-question",children:[t(O,{ref:S,task:_,question:c,answerIdOrder:g,choicesEnabled:A,answer_id:u,questionNumber:s,onChange:C,feedback_html:v,correct_answer_feedback_html:N,correct_answer_id:r?k:null,incorrectAnswerId:x,className:"step-card-body",hideAnswers:!1,displayFormats:!1,displaySolution:q,labelAnswers:W,show_all_feedback:M,tableFeedbackEnabled:Q,previewMode:a,rightSideSlot:e.rightSideSlot,children:t(z,{free_response:P,previewMode:a})}),a&&o||!a?t(T,{className:"step-card-footer",children:n("div",{className:"step-card-footer-inner",children:[n("div",{className:"points",role:"status",children:[f?n("strong",{children:["Points: ",f]}):null,t("span",{className:"attempts-left",children:F&&m>0&&t(G,{count:m})}),t(H,{published_comments:R}),o&&n("div",{children:[t("strong",{children:"Detailed solution:"})," ",t(D,{html:o})]})]}),t("div",{className:"controls",children:E&&y||i?t(J,{disabled:h||!u||i,isWaiting:h||i,attempt_number:B,onClick:()=>{I(U(c.id)),p||b(!0)},willContinue:!p}):t(K,{onClick:()=>d(s-1),canUpdateCurrentStep:j})})]})}):null]})});export{te as E};
