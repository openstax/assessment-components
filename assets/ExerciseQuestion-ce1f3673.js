import{R as o,a as n,j as t,F as Q}from"./index-6aae8bc2.js";import{n as U}from"./Answer-3bf89cae.js";import{B as b}from"./Button-bda545f4.js";import{C as D}from"./Feedback-c17f6545.js";import{a as M}from"./Question-5a6de838.js";import{S as O}from"./StepCardFooter-c2f64ec5.js";const T=({count:e})=>n("div",{children:[e," attempt",e===1?"":"s"," left"]}),z=({published_comments:e})=>e?n("div",{children:[t("strong",{children:"Feedback:"})," ",e]}):null,G=e=>t(b,{...e,waitingText:"Savingâ€¦",isWaiting:e.isWaiting,"data-test-id":"submit-answer-btn",children:e.willContinue?"Submit & continue":e.attempt_number==0?"Submit":"Re-submit"}),H=e=>t(b,{...e,"data-test-id":"continue-btn",children:e.canUpdateCurrentStep?"Continue":"Next"}),J=({free_response:e})=>e?t(Q,{children:t("div",{className:"free-response",children:e})}):null,$=o.forwardRef((e,w)=>{const{question:d,task:_,answer_id_order:C,onAnswerChange:S,feedback_html:g,correct_answer_feedback_html:v,is_completed:a,correct_answer_id:N,incorrectAnswerId:k,choicesEnabled:x,questionNumber:i,answer_id:l,hasMultipleAttempts:F,attempts_remaining:c,published_comments:A,detailedSolution:u,canAnswer:R,needsSaved:E,attempt_number:y,apiIsPending:m,onAnswerSave:B,onNextStep:r,canUpdateCurrentStep:I,displaySolution:j,available_points:h,free_response:q,show_all_feedback:P,tableFeedbackEnabled:W,hasFeedback:f}=e,[s,p]=o.useState(!1);return o.useEffect(()=>{s&&a&&(r(i-1),p(!1))},[r,i,s,a]),n("div",{"data-test-id":"student-exercise-question",children:[t(M,{ref:w,task:_,question:d,answerIdOrder:C,choicesEnabled:x,answer_id:l,questionNumber:i,onChange:S,feedback_html:g,correct_answer_feedback_html:v,correct_answer_id:a?N:null,incorrectAnswerId:k,className:"step-card-body",hideAnswers:!1,displayFormats:!1,displaySolution:j,show_all_feedback:P,tableFeedbackEnabled:W,children:t(J,{free_response:q})}),t(O,{className:"step-card-footer",children:n("div",{className:"step-card-footer-inner",children:[n("div",{className:"points",role:"status",children:[h?n("strong",{children:["Points: ",h]}):null,t("span",{className:"attempts-left",children:F&&c>0&&t(T,{count:c})}),t(z,{published_comments:A}),u&&n("div",{children:[t("strong",{children:"Detailed solution:"})," ",t(D,{html:u})]})]}),t("div",{className:"controls",children:R&&E||s?t(G,{disabled:m||!l||s,isWaiting:m||s,attempt_number:y,onClick:()=>{B(U(d.id)),f||p(!0)},willContinue:!f}):t(H,{onClick:()=>r(i-1),canUpdateCurrentStep:I})})]})})]})});export{$ as E};
