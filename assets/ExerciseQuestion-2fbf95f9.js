import{R as l,a as n,j as t}from"./index-032b48ee.js";import{n as z}from"./Answer-c12fc902.js";import{B as w}from"./Button-1e96fc4b.js";import{C as D}from"./Feedback-221222bc.js";import{a as O}from"./Question-227f22ba.js";import{S as T}from"./StepCardFooter-7e428df8.js";import{F as G}from"./FreeResponseReview-d49cd0ee.js";const H=({count:e})=>n("div",{children:[e," attempt",e===1?"":"s"," left"]}),J=()=>t("div",{children:"Unlimited quiz attempts left"}),K=({published_comments:e})=>e?n("div",{children:[t("strong",{children:"Feedback:"})," ",e]}):null,L=e=>t(w,{...e,waitingText:"Savingâ€¦",isWaiting:e.isWaiting,"data-test-id":"submit-answer-btn",children:e.willContinue?"Submit & continue":e.attempt_number==0?"Submit":"Re-submit"}),V=e=>t(w,{...e,"data-test-id":"continue-btn",children:e.canUpdateCurrentStep?"Continue":"Next"}),ie=l.forwardRef((e,S)=>{const{question:c,task:_,answer_id_order:g,onAnswerChange:v,feedback_html:C,correct_answer_feedback_html:A,is_completed:r,correct_answer_id:N,incorrectAnswerId:k,choicesEnabled:x,questionNumber:s,answer_id:m,hasMultipleAttempts:F,hasUnlimitedAttempts:R,attempts_remaining:u,published_comments:E,detailedSolution:o,canAnswer:U,needsSaved:q,attempt_number:y,apiIsPending:h,onAnswerSave:B,onNextStep:d,canUpdateCurrentStep:I,displaySolution:j,available_points:f,free_response:P,labelAnswers:W,show_all_feedback:M,tableFeedbackEnabled:Q,hasFeedback:p,previewMode:a}=e,[i,b]=l.useState(!1);return l.useEffect(()=>{i&&r&&(d(s-1),b(!1))},[d,s,i,r]),n("div",{"data-test-id":"student-exercise-question",children:[t(O,{ref:S,task:_,question:c,answerIdOrder:g,choicesEnabled:x,answer_id:m,questionNumber:s,onChange:v,feedback_html:C,correct_answer_feedback_html:A,correct_answer_id:r?N:null,incorrectAnswerId:k,className:"step-card-body",hideAnswers:!1,displayFormats:!1,displaySolution:j,labelAnswers:W,show_all_feedback:M,tableFeedbackEnabled:Q,previewMode:a,rightSideSlot:e.rightSideSlot,children:t(G,{free_response:P,previewMode:a})}),a&&o||!a?t(T,{className:"step-card-footer",children:n("div",{className:"step-card-footer-inner",children:[n("div",{className:"points",role:"status",children:[f?n("strong",{children:["Points: ",f]}):null,n("span",{className:"attempts-left",children:[F&&u>0&&t(H,{count:u}),R?t(J,{}):null]}),t(K,{published_comments:E}),o&&n("div",{children:[t("strong",{children:"Detailed solution:"})," ",t(D,{html:o})]})]}),t("div",{className:"controls",children:U&&q||i?t(L,{disabled:h||!m||i,isWaiting:h||i,attempt_number:y,onClick:()=>{B(z(c.id)),p||b(!0)},willContinue:!p}):t(V,{onClick:()=>d(s-1),canUpdateCurrentStep:I})})]})}):null]})});export{ie as E};
