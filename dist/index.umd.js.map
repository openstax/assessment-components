{"version":3,"file":"index.umd.js","sources":["../src/utils.ts","../src/theme.ts","../src/hooks/useTypesetMath.ts","../src/components/Content.tsx","../src/components/Feedback.tsx","../src/components/Answer.tsx","../src/constants.ts","../src/components/AnswersTable.tsx","../src/components/Card.tsx","../src/components/Button.tsx","../src/components/CompletionStatus.tsx","../src/components/Question.tsx","../src/components/StepCardFooter.tsx","../src/components/FreeResponseInput.tsx","../src/components/ExerciseQuestion.tsx","../src/helpers/mathjax.ts","../src/components/ExerciseToolbar.tsx","../src/components/ExerciseHeaderIcons.tsx","../src/components/Exercise.tsx","../src/assets/flag.tsx","../src/components/ProgressBar.tsx","../src/components/Loader.tsx"],"sourcesContent":["import { Answer, ID } from '../src/types';\n\nexport const ALPHABET = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n\nconst MAX_CORRECTNESS = '1.0';\n\nexport const isAnswerCorrect = function(answer: Answer, correctAnswerId?: ID | null) {\n  // if answer does not have an id, check the isCorrect property.\n  if (!(answer.id || correctAnswerId)) {\n    return answer.isCorrect;\n  }\n  let isCorrect = answer.id === correctAnswerId;\n  if (answer.correctness != null) { isCorrect = (answer.correctness === MAX_CORRECTNESS); }\n\n  return isCorrect;\n};\n\nexport const isAnswerIncorrect = (answer: Answer, incorrectAnswerId?: ID) =>\n  // Allow multiple attempts to show incorrectness without the correct_answer_id\n  answer.id === incorrectAnswerId;\n\nexport const isAnswerChecked = (answer: Answer, answerId?: ID) =>\n   answer.id == answerId;\n\nexport function countWords(text: string) {\n  const trimmedText = text.trim();\n  //https://css-tricks.com/build-word-counter-app/\n  const words = trimmedText.match(/\\b[-?(\\w+)?]+\\b/gi);\n  if(!words) return 0;\n  return words.length;\n}\n\nexport const numberfyId = (id: ID) => typeof id === 'string' ? parseInt(id, 10) : id;\n","import { css } from 'styled-components';\n\nconst palette = {\n  red: \"#ca2026\",\n  danger: \"#c2002f\",\n  darkRed: \"#c22032\",\n  lightRed: \"#e298a0\",\n  green: \"#77af42\",\n  lightGreen: \"#8bc753\",\n  darkGreen: \"#63a524\",\n  paleYellow: \"#ffffbb\",\n  teal: \"#0dc0de\",\n  blue: \"#007da4\",\n  mediumBlue: \"#026AA1\",\n  lightBlue: \"#34bdd8\",\n  neutralLightBlue: \"#0dc0dc\",\n  tangerine: \"#ffbd3e\",\n  gray: \"#5e5e5e\",\n  darkGray: \"#757575\",\n  pale: \"#d5d5d5\",\n  light: \"#e4e4e4\",\n  white: \"#ffffff\",\n  neutralLightest: \"#f9f9f9\", // nearly white\n  neutralCool: \"#f6f7f8\", // cool bright gray\n  neutralBright: \"#f5f5f5\", // bright gray\n  neutralLighter: \"#f1f1f1\", // light gray\n  neutralLight: \"#e5e5e5\", // light gray\n  neutralMedium: \"#a0a0a0\", // light gray\n  neutral: \"#818181\", // gray\n  neutralThin: \"#6f6f6f\", // medium gray\n  neutralDark: \"#5f6163\", // dark gray\n  neutralFeedback: \"#555\", // another dark gray\n  neutralDarker: \"#424242\", // very dark gray\n  black: \"#000000\",\n  orange: \"#D4450C\"\n};\n\nexport const colors = {\n  palette: palette,\n  answer: {\n    neutral: palette.neutralThin,\n    hover: '#026AA1',\n    checked: '#026AA1',\n    correct: '#0D7741',\n    incorrect: '#C22032'\n  },\n  popover: {\n    arrowOuterColor: \"rgba(0, 0, 0, 0.25)\",\n    borderColor: \"rgba(0, 0, 0, 0.2)\",\n  },\n  card: {\n    header: {\n     background: \"#daf3f8\"\n    },\n    body: {\n      background: \"#fdfdfd\"\n    }\n  },\n  button: {\n    background: palette.orange,\n    backgroundHover: \"#E74B0D\",\n    backgroundActive: \"#C5400B\"\n  },\n  freeResponse: {\n    color: palette.neutralDarker,\n    background:palette.neutralLighter,\n  },\n};\n\nexport const layouts = {\n  answer: {\n    verticalSpacing: \"1rem\",\n    horizontalSpacing: \"1rem\",\n    horizontalBuffer: \"2.5rem\",\n    bubbleSize: \"3.6rem\",\n    labelSpacing: \"6.5rem\",\n    feedback: {\n      popover: {\n        horizontalSpacing: \"1.1rem\",\n        verticalSpacing: \"0.9rem\",\n        maxWidth: \"370px\",\n      },\n    },\n  },\n  popover: {\n    arrow: {\n      width: \"16px\",\n      height: \"8px\",\n      edgeDistance: \"9px\",\n    },\n    horizontalSpacing: \"0.8rem\",\n    verticalSpacing: \"1rem\",\n    horizontalBuffer: \"4rem\",\n    borderWidth: \"1px\",\n    maxWidth: \"325px\",\n  },\n  card: {\n    spacing: '2rem'\n  }\n};\n\nexport const BREAKPOINTS = {\n  mobile: 600,\n  tablet: 999,\n  desktop: 1000,\n  large: 1600,\n};\n\nexport const breakpoints = {\n  mobile(...args: Parameters<typeof css>) {\n    return css`@media(max-width: ${BREAKPOINTS.mobile}px) { ${css(...args)} }`;\n  },\n  tablet(...args: Parameters<typeof css>) {\n    return css`@media(max-width: ${BREAKPOINTS.tablet}px) { ${css(...args)} }`;\n  },\n  desktop(...args: Parameters<typeof css>) {\n    return css`@media(min-width: ${BREAKPOINTS.desktop}px) { ${css(...args)} }`;\n  },\n  only: {\n    mobile(...args: Parameters<typeof css>) {\n      return css`@media(max-width: ${BREAKPOINTS.mobile}px) { ${css(...args)} }`;\n    },\n  },\n  margins: {\n    mobile: '8px',\n    tablet: '24px',\n  },\n};\n\nexport const transitions = {\n  answer: \"0.1s ease-in-out\",\n}\n\nexport const mixins = {\n  answer: () => css`\n    .answer-label {\n      display: flex;\n    }\n    color: ${palette.neutralDarker};\n    .answer-letter {\n      width: ${layouts.answer.bubbleSize};\n      height: ${layouts.answer.bubbleSize};\n      min-width: ${layouts.answer.bubbleSize};\n      min-height: ${layouts.answer.bubbleSize};\n      border-radius: calc(${layouts.answer.bubbleSize} / 2);\n      border-width: 2px;\n      border-style: solid;\n      border-color: #c6c6c6;\n      color: ${colors.answer.neutral};\n      transition: color ${transitions.answer}, border-color ${transitions.answer}, background-color ${transitions.answer};\n      background-color: ${colors.palette.white};\n      font-family: \"Neue Helvetica W01\", Helvetica, Arial, sans-serif;\n    }\n  `,\n  answerColor: (\n    color: string, invertBubble = false\n  ) => css`\n    .answer-letter {\n      color: ${invertBubble ? '#fff' : color};\n      border-color: ${color};\n      ${invertBubble ? `background-color: ${color};` : null}\n    }\n  `,\n  answerChecked: () => mixins.answerColor(colors.answer.checked, true),\n  answerCorrect: (checked?: boolean) => mixins.answerColor(colors.answer.correct, checked),\n  answerIncorrect: (checked?: boolean) => mixins.answerColor(colors.answer.incorrect, checked),\n  answerHover: () => css`\n    ${mixins.answerColor(colors.answer.hover)};\n    font-weight: bold;\n  `,\n  answerCorrectAnswer: () => mixins.answerColor(colors.answer.correct, false),\n  resetText: () => css`\n    font-family:  \"Neue Helvetica W01\", Helvetica, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Arial, \"Noto Sans\", \"Liberation Sans\", sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\";\n    font-style: normal;\n    font-weight: 400;\n    line-height: 1.6;\n    text-align: left;\n    text-align: start;\n    text-decoration: none;\n    text-shadow: none;\n    text-transform: none;\n    letter-spacing: normal;\n    word-break: normal;\n    word-spacing: normal;\n    white-space: normal;\n    line-break: auto;\n  `,\n  stepCardPadding: () => css`\n    padding: 48px 140px;\n\n    ${breakpoints.tablet`\n      padding: ${breakpoints.margins.tablet} ${breakpoints.margins.tablet};\n    `}\n\n    ${breakpoints.mobile`\n      padding: calc(${breakpoints.margins.mobile} * 2) ${breakpoints.margins.mobile};\n    `}\n  `,\n  popover: () => css`\n    ${mixins.resetText()}\n\n    z-index: 1;\n    position: relative;\n    border: ${layouts.popover.borderWidth} solid ${colors.popover.borderColor};\n    background-color: ${colors.palette.white};\n    background-clip: padding-box;\n    max-width: ${layouts.popover.maxWidth};\n    margin: calc(${layouts.popover.arrow.height} - 14px) 0 ${layouts.answer.horizontalSpacing} 8px;\n    box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.1);\n    color: ${colors.palette.neutralThin};\n    font-size: calc(1.4rem * var(--content-text-scale));\n\n    .arrow {\n      position: absolute;\n      display: block;\n      width: ${layouts.popover.arrow.width};\n      height: ${layouts.popover.arrow.height};\n      margin-left: ${layouts.popover.arrow.edgeDistance};\n      top: calc(${layouts.popover.arrow.height} * -1);\n\n      &::before,\n      &::after {\n        position: absolute;\n        display: block;\n        content: \"\";\n        border-color: transparent;\n        border-style: solid;\n        border-width: 0 calc(${layouts.popover.arrow.width} / 2) ${layouts.popover.arrow.height} calc(${layouts.popover.arrow.width} / 2);\n      }\n      &::before {\n        top: 0;\n        border-bottom-color: ${colors.popover.borderColor};\n      }\n      &::after {\n        top: ${layouts.popover.borderWidth};\n        border-bottom-color: ${colors.palette.white};\n      }\n    }\n\n    &.right {\n      right: calc(-${layouts.popover.arrow.edgeDistance} - ${layouts.popover.borderWidth});\n      .arrow { right: ${layouts.popover.arrow.edgeDistance}; }\n    }\n\n\n    > .content {\n      padding: ${layouts.popover.verticalSpacing} ${layouts.popover.horizontalSpacing};\n    }\n  `,\n};\n\nconst theme = {\n  colors: colors,\n  layouts: layouts,\n  transitions: transitions,\n  breakpoints: breakpoints,\n};\n\nexport default theme;\n","import React from \"react\";\n\nexport const TypesetMathContext = React.createContext<() => void>(() => { throw new Error('context not initialized') });\nexport const useTypesetMath = () => React.useContext(TypesetMathContext);\n","import React from \"react\";\nimport { useTypesetMath } from \"../hooks/useTypesetMath\";\n\n/* eslint-disable-next-line @typescript-eslint/no-explicit-any */\ntype ComponentType = keyof JSX.IntrinsicElements | React.JSXElementConstructor<any>;\n\nexport interface ContentProps<T extends ComponentType | undefined> {\n  className?: string;\n  component?: T extends undefined ? undefined :\n    T extends ComponentType ? React.ReactComponentElement<T>:\n    never;\n  html: string;\n  block?: boolean;\n}\n\nexport const Content = (<T extends ComponentType | undefined>(\n  {html, component, block = false, ...props}: ContentProps<T>\n) => {\n  const typesetMath = useTypesetMath();\n\n  React.useEffect(() => {\n    typesetMath();\n  }, [typesetMath, html])\n\n  if (component !== undefined) {\n    return React.cloneElement(component, {html, ...props});\n  }\n  if (block) {\n    return <div dangerouslySetInnerHTML={{ __html: html }} {...props} />;\n  } else {\n    return <span dangerouslySetInnerHTML={{ __html: html }} {...props} />;\n  }\n});\n","import classnames from 'classnames';\nimport { Content } from './Content';\n\ninterface FeedbackProps {\n  position?: 'top' | 'bottom' | 'left' | 'right';\n  children: string;\n  className?: string;\n  contentRenderer?: JSX.Element;\n}\n\nconst SimpleFeedback = (props: Pick<FeedbackProps, 'children' | 'className' | 'contentRenderer'>) => (\n  <aside>\n    <Content\n      component={props.contentRenderer}\n      className={classnames('question-feedback-content', 'has-html', props.className)}\n      html={props.children}\n      block={true} />\n  </aside>\n);\n\nconst Feedback = (props: FeedbackProps) => {\n  const position = props.position || 'bottom';\n  const wrapperClasses = classnames('question-feedback', position);\n\n  return (\n    <aside className={wrapperClasses}>\n      <div className=\"arrow\" aria-label=\"Answer Feedback\" />\n      <SimpleFeedback {...props}>\n        {props.children}\n      </SimpleFeedback>\n    </aside>\n  );\n};\n\nexport { Feedback, SimpleFeedback };\n","import cn from 'classnames';\nimport { ReactNode } from 'react';\nimport { ALPHABET, isAnswerChecked, isAnswerCorrect, isAnswerIncorrect } from '../utils';\nimport { Answer as AnswerType, ID } from '../types';\nimport { Content } from './Content';\nimport { SimpleFeedback } from './Feedback';\nimport styled from 'styled-components';\nimport { colors } from '../theme';\n\nconst StyledAnswerIndicator = styled.div<{ state: boolean }>`\n  color: ${props => props.state ? colors.answer.correct : colors.answer.incorrect};\n  text-transform: uppercase;\n  font-size: calc(1.1rem * var(--content-text-scale));\n  font-weight: bold;\n`;\n\nconst AnswerIndicator = (\n  { isCorrect, isIncorrect }: { isCorrect?: boolean; isIncorrect?: boolean }\n) => {\n  if (!isCorrect && !isIncorrect) {\n    return null;\n  }\n  const state = isCorrect || isIncorrect === false;\n\n  return <StyledAnswerIndicator state={state}>\n    {state ? 'Correct' : 'Incorrect'} Answer\n  </StyledAnswerIndicator>\n};\n\nexport interface AnswerProps {\n  answer: AnswerType;\n  iter: number;\n  qid: ID;\n  type: 'teacher-review' | 'teacher-preview' | 'student' | 'student-mpp';\n  hasCorrectAnswer?: boolean;\n  onChangeAnswer?: (answer: AnswerType) => void;\n  disabled: boolean;\n  answerId?: ID;\n  correctAnswerId?: ID | null;\n  incorrectAnswerId?: ID;\n  onKeyPress?: () => void;\n  answered_count?: number;\n  correctIncorrectIcon?: ReactNode,\n  radioBox?: ReactNode;\n  contentRenderer?: JSX.Element;\n  show_all_feedback?: boolean;\n  tableFeedbackEnabled?: boolean;\n}\n\nexport const Answer = (props: AnswerProps) => {\n  const {\n    type,\n    iter,\n    answer,\n    disabled,\n    onKeyPress,\n    qid,\n    answerId,\n    correctAnswerId,\n    incorrectAnswerId,\n    hasCorrectAnswer,\n    answered_count,\n    contentRenderer,\n    show_all_feedback,\n    tableFeedbackEnabled,\n  } = props;\n\n  let body, feedback, selectedCount;\n\n  const isChecked = isAnswerChecked(answer, answerId);\n  const isCorrect = isAnswerCorrect(answer, correctAnswerId);\n  const isIncorrect = isAnswerIncorrect(answer, incorrectAnswerId);\n  // When rendering a previous response, we can determine if it was this answer.\n  // If there is no incorrectAnswerId, that means only a correct answer is present, check isCorrect.\n  // If an incorrectAnswerId is present (there is only ever one, if multiple attempts are enabled,\n  // it is the latest one) checking isIncorrect works because incorrectAnswerId is only set for\n  // a missed attempt, meaning if an attempt is missed and then successfully re-attempted,\n  // incorrectAnswerId will be empty.\n  const isPreviousResponse = answerId === undefined && (!incorrectAnswerId && isCorrect || isIncorrect);\n\n  const classes = cn('answers-answer', {\n    'disabled': disabled,\n    'answer-selected': isChecked || isPreviousResponse,\n    'answer-correct': isCorrect && type !== 'student-mpp',\n    'answer-incorrect': incorrectAnswerId && isAnswerIncorrect(answer, incorrectAnswerId),\n  });\n\n  const correctIncorrectIcon = (\n    <div className=\"correct-incorrect\">\n      {isCorrect && props.correctIncorrectIcon}\n    </div>\n  );\n\n  let ariaLabel = `${isChecked ? 'Selected ' : ''}Choice ${ALPHABET[iter]}`;\n  // somewhat misleading - this means that there is a correct answer,\n  // not necessarily that this answer is correct\n  if (hasCorrectAnswer) {\n    ariaLabel += `(${isCorrect ? 'Correct' : 'Incorrect'} Answer)`;\n  }\n  ariaLabel += ':';\n\n  let onChangeAnswer: AnswerProps['onChangeAnswer'], radioBox;\n\n  const onChange = () => onChangeAnswer && onChangeAnswer(answer);\n\n  if (!hasCorrectAnswer\n    && (type !== 'teacher-review')\n    && (type !== 'teacher-preview')\n    && (type !== 'student-mpp')) {\n    ({ onChangeAnswer } = props);\n  }\n\n  if (onChangeAnswer) {\n    radioBox = (\n      <input\n        type=\"radio\"\n        className=\"answer-input-box\"\n        checked={isChecked}\n        id={`${qid}-option-${iter}`}\n        name={`${qid}-options`}\n        onChange={onChange}\n        disabled={disabled}\n      />\n    );\n  }\n\n  if (show_all_feedback && answer.feedback_html && !tableFeedbackEnabled) {\n    feedback = (\n      <SimpleFeedback key=\"question-mc-feedback\" contentRenderer={contentRenderer}>\n        {answer.feedback_html}\n      </SimpleFeedback>\n    );\n  }\n\n  if (type === 'teacher-review') {\n    let percent = 0;\n    if (answer.selected_count && answered_count) {\n      percent = Math.round((answer.selected_count / answered_count) * 100);\n    }\n    selectedCount = (\n      <span\n        className=\"selected-count\"\n        data-percent={`${percent}`}\n      >\n        {answer.selected_count}\n      </span>\n    );\n\n    body = (\n      <div className=\"review-wrapper\">\n        <div className={cn('review-count', { 'green': isCorrect, 'red': !isCorrect })}>\n          {selectedCount}\n          <span className={cn('letter', { 'green': isCorrect, 'red': !isCorrect })}>\n            {ALPHABET[iter]}\n          </span>\n        </div>\n\n        <div className=\"answer-answer\">\n          <Content className=\"answer-content\" component={contentRenderer} html={answer.content_html} />\n          {feedback}\n        </div>\n      </div>\n    );\n  } else {\n    body = (\n      <>\n        {type === 'teacher-preview' && correctIncorrectIcon}\n        {selectedCount}\n        {radioBox}\n        <label\n          onKeyPress={onKeyPress}\n          htmlFor={`${qid}-option-${iter}`}\n          className=\"answer-label\">\n          <span className=\"answer-letter-wrapper\">\n            <button\n              onClick={onChange}\n              aria-label={ariaLabel}\n              className=\"answer-letter\"\n              disabled={disabled || isIncorrect}\n              data-test-id={`answer-choice-${ALPHABET[iter]}`}\n            >\n              {ALPHABET[iter]}\n            </button>\n          </span>\n          <div className=\"answer-answer\">\n            <AnswerIndicator isCorrect={isCorrect} isIncorrect={isIncorrect} />\n            <Content className=\"answer-content\" component={contentRenderer} html={answer.content_html} />\n            {feedback}\n          </div>\n        </label>\n      </>\n    );\n  }\n\n  return (\n    <div className=\"openstax-answer\">\n      <section className={classes}>\n        {body}\n      </section>\n    </div>\n  );\n}\nAnswer.displayName = 'OSAnswer';\n","import { AnswerDisplayType } from './types';\n\nexport const defaultAnswerType: AnswerDisplayType = 'student';\n","import { defaultAnswerType } from \"../constants\";\nimport { Answer as AnswerType, AnswerDisplayType, ID, ExerciseQuestionData } from \"src/types\";\nimport { Answer } from \"./Answer\";\nimport { Feedback } from \"./Feedback\";\n\nexport interface AnswersTableProps {\n  question: ExerciseQuestionData;\n  type?: AnswerDisplayType;\n  answer_id?: ID;\n  correct_answer_id?: ID | null;\n  incorrectAnswerId?: ID;\n  answerIdOrder?: ID[],\n  feedback_html: string;\n  correct_answer_feedback_html?: string;\n  answered_count?: number;\n  show_all_feedback?: boolean;\n  tableFeedbackEnabled?: boolean;\n  onChangeAnswer: () => void;\n  hideAnswers: boolean;\n  hasCorrectAnswer?: boolean;\n  onChangeAttempt?: () => void;\n  choicesEnabled?: boolean;\n  onKeyPress?: () => void;\n  contentRenderer?: JSX.Element;\n  instructions?: JSX.Element;\n}\n\nexport const AnswersTable = (props: AnswersTableProps) => {\n  let idCounter = 0;\n\n  const {\n    question, hideAnswers, type = defaultAnswerType, answered_count, choicesEnabled, correct_answer_id,\n    incorrectAnswerId, answer_id, feedback_html, correct_answer_feedback_html,\n    show_all_feedback = false, tableFeedbackEnabled, hasCorrectAnswer, onChangeAnswer, onKeyPress, answerIdOrder, instructions\n  } = props;\n  if (hideAnswers) { return null; }\n\n  const { id } = question;\n\n  const feedback: { index: number, html: string }[] = [];\n\n  const sortedAnswersByIdOrder = (idOrder: ID[]) => {\n    const { answers } = question;\n    return answers.slice().sort((a, b) => idOrder.indexOf(a.id) - idOrder.indexOf(b.id));\n  }\n\n  const questionAnswerProps = {\n    qid: id || `auto-${idCounter++}`,\n    answerId: answer_id,\n    correctAnswerId: correct_answer_id,\n    incorrectAnswerId,\n    hasCorrectAnswer,\n    onChangeAnswer: onChangeAnswer,\n    type,\n    answered_count,\n    disabled: !choicesEnabled,\n    show_all_feedback,\n    tableFeedbackEnabled,\n    onKeyPress\n  };\n\n  const answers = answerIdOrder ? sortedAnswersByIdOrder(answerIdOrder) : question.answers;\n\n  const answersHtml = answers.map((answer, i) => {\n    const additionalProps: { answer: AnswerType, iter: number, key: string }\n      = {\n        answer: {\n          ...answer,\n          question_id: typeof question.id === 'string' ? parseInt(question.id, 10) : question.id\n         },\n      iter: i,\n      key: `${questionAnswerProps.qid}-option-${i}`\n    };\n    const answerProps = Object.assign({}, additionalProps, questionAnswerProps);\n\n    if (show_all_feedback && answer.feedback_html && tableFeedbackEnabled) {\n      feedback.push({ index: i, html: answer.feedback_html })\n    } else if (answer.id === incorrectAnswerId && feedback_html) {\n      feedback.push({ index: i, html: feedback_html })\n    } else if (answer.id === correct_answer_id && correct_answer_feedback_html) {\n      feedback.push({ index: i, html: correct_answer_feedback_html })\n    }\n\n    return (\n      <Answer {...answerProps} />\n    );\n  });\n\n  feedback.forEach((item, i) => {\n    const spliceIndex = item.index + i + 1;\n    answersHtml.splice(spliceIndex, 0, (\n      <Feedback key={spliceIndex} contentRenderer={props.contentRenderer}>\n        {item.html}\n      </Feedback>\n    ));\n  });\n\n  return (\n    <div className=\"answers-table\">\n      {instructions}\n      {answersHtml}\n    </div>\n  );\n}\n","import { ReactNode } from \"react\";\nimport { breakpoints, colors, layouts, mixins } from \"../theme\";\nimport { AvailablePoints, StepBase, StepWithData } from \"../types\";\nimport styled from \"styled-components\";\nimport cn from \"classnames\";\n\nexport const InnerStepCard = styled.div`\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  flex: 1 1 auto;\n  min-height: 400px;\n  margin: 0 auto 5rem auto;\n  border: 1px solid ${colors.palette.light};\n  border-radius: 0.25rem;\n  background-color: white;\n  overflow: hidden;\n\n  ${breakpoints.desktop`\n    max-width: 1000px;\n  `}\n`;\n\nexport const OuterStepCard = styled.div`\n  padding: ${layouts.card.spacing};\n\n  ${breakpoints.mobile`\n    padding: 0;\n  `}\n`;\n\nconst StepCardHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 16px 24px;\n  background: ${colors.card.header.background};\n  font-size: 1.8rem;\n  line-height: 3rem;\n  letter-spacing: -0.72px;\n\n  div.question-info {\n    display: flex;\n    align-items: baseline;\n    font-weight: bold;\n\n    .question-id {\n      font-weight: normal;\n    }\n    .ox-icon-lock {\n        margin-right: 1rem;\n    }\n  }\n\n  .num-questions, .points {\n      display: none;\n  }\n\n  .exercise-id, .separator {\n      font-weight: normal;\n  }\n\n  .separator {\n      margin: 0 0.4rem;\n  }\n\n  .exercise-id {\n      height: 28px; // Fix baseline issue\n  }\n\n  button {\n    color: ${colors.palette.gray};\n  }\n\n  .openstax-exercise-badges {\n      margin: 0;\n      line-height: 2rem;\n      svg {\n          display: block;\n          &:not(.interactive) {\n              margin: 0 0 0 6px !important;\n          }\n      }\n  }\n\n  ${breakpoints.desktop`\n      button.ox-icon-angle-left, button.ox-icon-angle-right {\n          display: none;\n      }\n      .separator {\n          display: inherit;\n      }\n  `}\n\n    /*\n    1. Show the arrows to move to previous and next question.\n    2. Show the number of questions.\n    3. Override box-shadow of icons when turned into a button.\n    */\n    ${breakpoints.tablet`\n        font-size: 1.6rem;\n        line-height: 2.5rem;\n\n        svg.ox-icon {\n            display: inherit;\n            margin: 0;\n        }\n        button.ox-icon-angle-left {\n            margin-right: ${breakpoints.margins.tablet};\n        }\n        button.ox-icon-angle-right {\n            margin-left: ${breakpoints.margins.tablet};\n        }\n        .openstax-exercise-badges svg {\n            display: none;\n        }\n        .num-questions, points {\n            display: inherit;\n        }\n\n        .exercise-id {\n            display: none;\n        }\n\n        button[class^='ox-icon-angle']:hover {\n            box-shadow: none;\n        }\n  `}\n\n  ${breakpoints.mobile`\n      font-size: 1.4rem;\n      line-height: 2rem;\n      padding: 10px 8px;\n\n      button.ox-icon-angle-left {\n          margin-right: ${breakpoints.margins.mobile};\n      }\n      button.ox-icon-angle-left {\n          margin-right: ${breakpoints.margins.mobile};\n      }\n  `}\n`;\nStepCardHeader.displayName = 'StepCardHeader';\n\nconst StepCardQuestion = styled.div<{ unpadded?: boolean }>`\n  .step-card-body {\n    ${mixins.stepCardPadding()}\n    overflow: auto;\n    background: ${colors.card.body.background};\n\n    &.exercise-stimulus {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n    }\n  }\n\n    & + div .step-card-body {\n        padding-top: 0;\n    }\n\n    &.exercise-context, &.exercise-stimulus, &.exercise-stem {\n        padding-bottom: 0;\n    }\n\n    ${breakpoints.only.mobile`\n        && .question-feedback {\n            margin-left: 0;\n\n           .arrow { margin-left: 12px; }\n        }\n    `}\n\n    .reading-step & {\n        padding: 0;\n    }\n\n    ${breakpoints.desktop`\n        .video-step &, .interactive-step & {\n            .openstax-exercise-badges {\n              margin-right: 3.8rem;\n            }\n        }\n    `}\n\n    ${breakpoints.mobile`\n        .openstax-exercise-badges svg {\n            margin-right: ${breakpoints.margins.mobile};\n        }\n    `}\n\n    &&& {\n        .openstax-has-html .splash .frame-wrapper { margin-top: 0; }\n    }\n`;\n\ninterface SharedProps {\n  questionNumber: number;\n  numberOfQuestions: number;\n  showTotalQuestions: boolean;\n  leftHeaderChildren?: ReactNode;\n  rightHeaderChildren?: ReactNode;\n  headerTitleChildren?: ReactNode;\n}\n\nexport interface StepCardProps extends SharedProps {\n  unpadded: boolean;\n  className?: string;\n  children?: ReactNode;\n  stepType: StepWithData['type'];\n  availablePoints?: AvailablePoints;\n  questionId?: string;\n  multipartBadge?: ReactNode;\n  isHomework: boolean;\n}\n\nconst StepCard = ({\n  questionNumber,\n  numberOfQuestions,\n  showTotalQuestions,\n  stepType,\n  isHomework,\n  availablePoints,\n  unpadded, // currently does nothing; may need to restore if this causes tutor stepcard regression\n  className,\n  children,\n  questionId,\n  multipartBadge,\n  leftHeaderChildren,\n  rightHeaderChildren,\n  headerTitleChildren,\n  ...otherProps }: StepCardProps) => {\n\n  const formattedQuestionNumber = numberOfQuestions > 1\n    ? `Questions ${questionNumber} - ${questionNumber + numberOfQuestions - 1}`\n    : `Question ${questionNumber}`;\n\n  return (\n    <OuterStepCard {...otherProps}>\n      {multipartBadge}\n      <InnerStepCard className={className}>\n        {questionNumber && isHomework && stepType === 'exercise' &&\n          <StepCardHeader>\n            <div>\n              {leftHeaderChildren}\n              <div className=\"question-info\">\n                {headerTitleChildren}\n                <span>{formattedQuestionNumber}</span>\n                {showTotalQuestions ? <span className=\"num-questions\">&nbsp;/ {numberOfQuestions}</span> : null}\n                <span className=\"separator\">|</span>\n                <span className=\"question-id\">ID: {questionId}</span>\n              </div>\n            </div>\n            {availablePoints || rightHeaderChildren ? <div>\n              {availablePoints && <div className=\"points\">{availablePoints} Points</div>}\n              {rightHeaderChildren}\n            </div> : null}\n          </StepCardHeader>\n        }\n        <StepCardQuestion unpadded={unpadded}>{children}</StepCardQuestion>\n      </InnerStepCard>\n    </OuterStepCard>\n  )\n};\nStepCard.displayName = 'OSStepCard';\n\nexport interface TaskStepCardProps extends SharedProps {\n  className?: string;\n  children?: ReactNode;\n  step: StepBase | StepWithData;\n  questionNumber: number;\n  numberOfQuestions: number;\n}\n\nconst TaskStepCard = ({\n  step,\n  questionNumber,\n  numberOfQuestions,\n  children,\n  className,\n  ...otherProps\n}: TaskStepCardProps) =>\n(<StepCard {...otherProps}\n  unpadded={true}\n  questionNumber={questionNumber}\n  numberOfQuestions={numberOfQuestions}\n  stepType={'type' in step ? step.type : 'exercise'}\n  isHomework={'task' in step ? (step.task === undefined || step.task.type === 'homework') : true}\n  data-task-step-id={step.id}\n  // uncomment next line to display available points on exercise questions\n  // availablePoints={step.available_points}\n  className={cn(`${('type' in step ? step.type : 'exercise')}-step`, className)}\n  questionId={step.uid}\n>\n  {children}\n</StepCard>);\n\nTaskStepCard.displayName = 'OSTaskStepCard';\n\nexport { StepCard, TaskStepCard };\n","import { colors } from \"../theme\";\nimport styled from \"styled-components\";\n\nconst StyledButton = styled.button`\n  background-color: ${colors.button.background};\n  color: ${colors.palette.white};\n  font-size: 1.6rem;\n  font-weight: 700;\n  line-height: 2rem;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  height: 4rem;\n  padding: 0 3rem;\n  border: 0;\n  border-radius: 5px;\n  box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.2);\n\n  &:not([disabled]) {\n    cursor: pointer;\n    &:hover {\n      background: ${colors.button.backgroundHover}\n    }\n    &:active {\n      background: ${colors.button.backgroundActive}\n    }\n  }\n  &:disabled {\n    opacity: 0.4;\n  }\n`;\n\ninterface ButtonProps extends React.ComponentPropsWithoutRef<'button'> {\n  isWaiting?: never;\n  waitingText?: never;\n}\ninterface WaitingButtonProps extends React.ComponentPropsWithoutRef<'button'> {\n  isWaiting: boolean;\n  waitingText: string;\n}\n\nconst Button = (props: ButtonProps | WaitingButtonProps) => {\n  const { disabled, isWaiting, waitingText, children, ...otherProps } = props;\n\n  return (\n    <StyledButton {...otherProps} disabled={isWaiting || disabled}>{(isWaiting && waitingText) || children}</StyledButton>\n  );\n}\n\nexport default Button;\n","import styled, { createGlobalStyle } from \"styled-components\";\nimport { InnerStepCard } from \"./Card\";\nimport Button from \"./Button\";\n\nconst GlobalStyle = createGlobalStyle`\n  :root {\n    --content-text-scale: 1;\n  }\n`;\n\nexport interface CompletionStatusProps {\n  numberOfQuestions: number;\n  numberCompleted: number;\n  handleClick: () => void;\n  className?: string;\n}\n\nconst CompletionStatusCard = styled(InnerStepCard)`\n  padding: 88px 72px;\n  font-size: calc(1.8rem * var(--content-text-scale));\n  line-height: calc(3rem * var(--content-text-scale));\n  display: block;\n\n  button {\n    min-width: 160px;\n    height: 48px;\n  }\n\n  p {\n    margin: 16px 0 20px 0;\n  }\n`;\n\nconst CompletionHeader = styled.h2`\n  font-size: calc(2.4rem * var(--content-text-scale));\n  margin: 0;\n`;\n\nexport const CompletionStatus = styled(({\n  numberOfQuestions, numberCompleted, handleClick, className\n}: CompletionStatusProps) => {\n\n  const allCompleted = numberOfQuestions === numberCompleted;\n  const someCompleted = numberCompleted > 0;\n  const buttonText = allCompleted ? 'Next' : (\n      someCompleted ? 'Continue' : 'Start'\n  );\n\n  return <>\n    <GlobalStyle />\n    <CompletionStatusCard className={className}>\n      <CompletionHeader>{allCompleted ? 'You are done.' : (someCompleted ? 'Quiz is partially complete.' : 'No questions have been answered.')}</CompletionHeader>\n      <p>{allCompleted ? 'Great job answering all the questions.' : (someCompleted ? `You've completed ${numberCompleted} of ${numberOfQuestions} questions.` : 'Begin working on the quiz.')}</p>\n      <Button data-test-id={`${buttonText.split(' ')[0].toLowerCase()}-btn`} onClick={() => handleClick()}>\n        {buttonText}\n      </Button>\n    </CompletionStatusCard>\n  </>\n})``;\n","import styled from 'styled-components';\nimport { mixins, colors, layouts, transitions } from '../theme';\nimport { AnswersTable } from './AnswersTable';\nimport classnames from 'classnames';\nimport { ID, ExerciseQuestionData, Task } from 'src/types';\nimport React, { ReactNode } from 'react';\nimport { Content } from './Content';\n\nconst StyledQuestion = styled.div`\n&.step-card-body {\n  ${mixins.stepCardPadding()};\n}\n\n&.openstax-question {\n  border-top: 1px solid ${colors.palette.pale};\n  font-size: calc(1.8rem * var(--content-text-scale));\n\n  .detailed-solution {\n    margin-bottom: 1rem;\n    .header {\n      display: inline;\n      margin-right: 0.5rem;\n      color: #5e6062;\n      font-weight: bold;\n      flex-basis: 0;\n    }\n    .solution {\n      display: inline;\n      color: #6f6f6f;\n    }\n  }\n\n  img {\n    display: block;\n    margin: auto;\n    max-width: 100%;\n  }\n\n  .question-stem {\n    margin-bottom: 0;\n  }\n\n  .answers-table {\n    margin-bottom: 20px;\n    font-size: calc(1.6rem * var(--content-text-scale));\n    line-height: calc(2rem * var(--content-text-scale));\n  }\n\n  .instructions {\n    font-size: 1.4rem;\n    font-style: italic;\n    margin-top: 10px;\n    color: ${colors.palette.neutral};\n    margin: 0;\n\n    i {\n      margin-left: 5px;\n    }\n\n    .text-info {\n      color: ${colors.palette.neutralLightBlue};\n      padding-left: 5px;\n      cursor: pointer;\n      font-style: normal;\n    }\n  }\n\n  .multiple-choice-prompt {\n    font-weight: 600;\n  }\n\n  .free-response {\n    padding: ${layouts.answer.horizontalSpacing} ${layouts.answer.horizontalBuffer};\n    margin: ${layouts.answer.verticalSpacing} 0 ${layouts.answer.horizontalSpacing} ${layouts.answer.verticalSpacing};\n    border-left: ${layouts.answer.horizontalSpacing} solid ${colors.palette.neutralLighter};\n    font-style: italic;\n  }\n\n  &:not(.openstax-question-preview) {\n    .answers-answer {\n      width: initial;\n      &:not(.disabled){\n        .answer-label:focus{\n          background-color: ${colors.palette.neutralLightest};\n        }\n      }\n      &.answer-selected {\n        font-weight: bold;\n      }\n      ${mixins.answer()};\n    }\n\n    .answer-answer {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      margin-left: ${layouts.answer.horizontalSpacing};\n      * {\n        margin: 0;\n      }\n    }\n\n    .answer-letter {\n      text-align: center;\n      padding: 0;\n      font-size: 1.6rem;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n\n    .answer-label {\n      width: 100%;\n      padding: ${layouts.answer.verticalSpacing} 0 0 0;\n      margin: 0;\n      transition: color ${transitions.answer};\n    }\n\n    // a selectable answer\n    .answer-input-box:not([disabled]) ~ .answer-label {\n      cursor: pointer;\n\n      &:hover {\n        ${mixins.answerHover()}\n      }\n    }\n\n    // a selected answer\n    &:not(.has-correct-answer) {\n      .answer-input-box {\n        display: none;\n\n        &:checked {\n          + .answer-label,\n          + .answer-label:hover {\n            ${mixins.answerChecked()};\n          }\n        }\n      }\n\n      .answer-selected {\n        .answer-label, .answer-label:hover {\n          ${mixins.answerChecked()};\n        }\n      }\n    }\n\n    // answer that has been checked\n    &.has-correct-answer {\n      .answer-selected {\n        &:not(.answer-correct) {\n          .answer-label {\n            ${mixins.answerIncorrect()};\n          }\n        }\n\n        &.answer-correct {\n          .answer-label {\n            ${mixins.answerCorrect(true)};\n          }\n        }\n      }\n\n      .answer-correct:not(.answer-selected) {\n        .answer-label {\n          ${mixins.answerCorrectAnswer()}\n        }\n      }\n    }\n\n    &.has-incorrect-answer {\n      .answer-incorrect {\n        .answer-label, .answer-label:hover {\n          ${mixins.answerIncorrect()}\n        }\n        &.answer-selected.answer-incorrect {\n          ${mixins.answerIncorrect(true)}\n        }\n      }\n    }\n\n    .question-feedback {\n      ${mixins.popover()}\n      max-width: ${layouts.answer.feedback.popover.maxWidth};\n      .question-feedback-content {\n        padding: ${layouts.answer.feedback.popover.verticalSpacing} ${layouts.answer.feedback.popover.horizontalSpacing};\n      }\n    }\n  }\n\n  .openstax-answer {\n    border-top: 1px solid #d5d5d5;\n    margin: 10px 0;\n    padding: 6px 8px;\n  }\n}\n`;\n\nexport interface QuestionProps {\n  question: ExerciseQuestionData,\n  answer_id?: ID;\n  task?: Task | null,\n  correct_answer_id: ID | null;\n  incorrectAnswerId: ID;\n  hideAnswers: boolean;\n  hidePreambles?: boolean,\n  exercise_uid?: string;\n  displayFormats: boolean,\n  className: string;\n  questionNumber: number;\n  displaySolution: boolean;\n  context?: string;\n  correct_answer_feedback_html?: string;\n  contentRenderer?: JSX.Element;\n  feedback_html: string;\n  onChange: () => void;\n  show_all_feedback?: boolean;\n  tableFeedbackEnabled?: boolean;\n  children?: ReactNode;\n  answerIdOrder?: ID[];\n  choicesEnabled?: boolean;\n}\n\nexport const Question = React.forwardRef((props: QuestionProps, ref: React.ForwardedRef<HTMLDivElement>) => {\n  let exerciseUid, solution;\n\n  const {\n    question, correct_answer_id, incorrectAnswerId, exercise_uid, className, questionNumber, context, task, hidePreambles\n  } = props;\n\n  const { stem_html, collaborator_solutions = [], formats, stimulus_html } = question;\n\n  const hasCorrectAnswer = !!correct_answer_id;\n  const hasIncorrectAnswer = !!incorrectAnswerId;\n\n  const taskIsDeleted = (task != null ? task.is_deleted : undefined)\n  const taskIsHomework = ((task != null ? task.type : undefined) === 'homework');\n\n  const classes = classnames('openstax-question', className, {\n    'has-correct-answer': hasCorrectAnswer && !(taskIsDeleted && taskIsHomework),\n    'has-incorrect-answer': hasIncorrectAnswer,\n  });\n\n  const hasSolution = () => {\n    const { displaySolution } = props;\n    const { collaborator_solutions = [] } = question;\n\n    return (\n      displaySolution &&\n      collaborator_solutions &&\n      collaborator_solutions.find(s => s['content_html'] !== undefined)\n    );\n  };\n\n  if (exercise_uid != null) {\n    exerciseUid = (\n      <div className=\"exercise-uid\">\n        {exercise_uid}\n      </div>\n    );\n  }\n\n  if (hasSolution()) {\n    solution =\n      <div className=\"detailed-solution\">\n        <div className=\"header\">\n          Detailed solution:\n        </div>\n        <Content\n          className=\"solution\"\n          block={true}\n          html={collaborator_solutions.map(s => s['content_html']).join('')} />\n      </div>;\n  }\n\n  return (\n    <StyledQuestion ref={ref} className={classes} data-question-number={questionNumber} data-test-id=\"question\">\n      <QuestionHtml type=\"context\" html={context} hidden={hidePreambles} />\n      <QuestionHtml type=\"stimulus\" html={stimulus_html} hidden={hidePreambles} />\n      <QuestionHtml type=\"stem\" html={stem_html} hidden={hidePreambles} questionNumber={questionNumber} />\n      {props.children}\n\n      <AnswersTable\n        {...props}\n        onChangeAnswer={props.onChange}\n        hasCorrectAnswer={hasCorrectAnswer} />\n\n      {solution}\n      {props.displayFormats ? <FormatsListing formats={formats} /> : undefined}\n      {exerciseUid}\n    </StyledQuestion>\n  );\n});\n\ninterface QuestionHtmlProps {\n  html?: string;\n  type: string;\n  hidden: QuestionProps['hidePreambles'];\n  questionNumber?: QuestionProps['questionNumber'];\n}\n\nexport const QuestionHtml = (props: QuestionHtmlProps) => {\n  const { html = '', type, hidden, questionNumber } = props;\n  if (hidden === true || !(html.length > 0)) { return null; }\n\n  return (\n    <Content\n      html={html}\n      data-question-number={questionNumber}\n      className={`question-${type}`}\n      block={true}\n    />\n  );\n};\n\nconst FormatsListing = ({ formats = [] }: { formats: ExerciseQuestionData['formats'] }) => {\n  return (\n    <div className=\"formats-listing\">\n      <div className=\"header\">Formats:</div>\n      {formats.map((format, i) => <span key={i}>{format}</span>)}\n    </div>\n  );\n};\n","import { colors, breakpoints, mixins } from \"../theme\";\nimport styled from \"styled-components\";\n\nexport const StepCardFooter = styled.div`\n    ${mixins.stepCardPadding()}\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-between;\n    font-size: calc(1.4rem * var(--content-text-scale));\n    line-height: calc(2rem * var(--content-text-scale));\n    background: ${colors.card.body.background};\n    overflow: auto;\n\n    > * {\n        flex-grow: 1;\n    }\n\n    button {\n        width: 160px;\n        height: 48px;\n    }\n\n    .step-card-footer-inner {\n        border-top: 1px solid ${colors.palette.pale};\n        padding-top: 32px;\n        display: flex;\n        justify-content: space-between;\n    }\n\n    .points {\n        margin-bottom: 1.6rem; // Replace with https://caniuse.com/?search=gap soon\n\n        .attempts-left {\n          color: #B03808;\n          font-weight: bold;\n        }\n    }\n\n    .controls {\n        display: flex;\n        flex-flow: column wrap-reverse;\n        margin-left: 1.6rem; // Replace with https://caniuse.com/?search=gap soon\n\n        button + button {\n            margin: 0.8rem 0 0 0;\n        }\n    }\n\n    ${breakpoints.desktop`\n        padding: 0 140px 32px 140px;\n        flex-wrap: nowrap;\n\n        .points {\n            max-width: 400px;\n        }\n\n        .controls {\n            flex-flow: row;\n            justify-content: flex-end;\n\n            button + button {\n                margin: 0 0 0 0.8rem;\n            }\n        }\n    `}\n`;\n","import { MouseEventHandler, ReactNode } from 'react';\nimport { countWords } from '../utils';\nimport styled, { css } from 'styled-components';\nimport { colors, mixins } from '../theme';\nimport { AvailablePoints, ExerciseQuestionData } from 'src/types';\nimport { QuestionHtml } from './Question';\nimport Button from './Button';\nimport { StepCardFooter } from './StepCardFooter';\n\nexport interface FreeResponseProps {\n  readOnly: boolean;\n  wordLimit: number;\n  infoRowChildren?: ReactNode;\n  onChange: (event: React.ChangeEvent<HTMLTextAreaElement>) => void;\n  cancelHandler: MouseEventHandler<HTMLButtonElement>;\n  saveHandler: MouseEventHandler<HTMLButtonElement>;\n  defaultValue: string;\n  isSubmitDisabled: boolean;\n  questionNumber: number,\n  question: ExerciseQuestionData,\n  availablePoints?: AvailablePoints,\n  textHasChanged: boolean;\n  submitBtnLabel: string;\n}\n\nconst TextAreaErrorStyle = css`\n  background-color: #f5e9ea;\n`;\n\nconst StyledFreeResponse = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  .step-card-body {\n    ${mixins.stepCardPadding()}\n  }\n`;\n\nconst SyledQuestionStem = styled.div`\n  font-size: 2rem;\n  line-height: 1.68em;\n  position: relative;\n`;\n\nconst InfoRow = styled.div<{ hasChildren: boolean }>`\n  margin: 8px 0;\n  display: flex;\n  justify-content: ${props => props.hasChildren ? 'space-between' : 'flex-end'};\n  line-height: 1.6rem;\n\n  .word-limit-error-info {\n    color: ${colors.palette.danger};\n  }\n\n  div > span {\n    font-size: 12px;\n    line-height: 16px;\n\n    + span {\n      margin-left: 1rem;\n    }\n  }\n\n  .last-submitted + * {\n    margin-top: 0.8rem;\n  }\n\n  color: ${colors.palette.neutralThin};\n`;\n\nexport const FreeResponseTextArea = styled.textarea<{ isOverWordLimit: boolean } & FreeResponseProps>`\n  display: block;\n  font-family: inherit;\n  font-size: 1.8rem;\n  line-height: 3rem;\n  width: 100%;\n  min-height: 10.5em;\n  line-height: 1.5em;\n  margin: 2.5rem 0 0 0;\n  padding: 0.5em;\n  border: 1px solid ${colors.palette.neutral};\n  color: ${colors.palette.neutralDark};\n  ${props => props.isOverWordLimit && TextAreaErrorStyle};\n  ${props => props.isOverWordLimit && css`\n    border: 2px solid ${colors.palette.danger};\n  `}\n  background-color: ${props => props.readOnly && colors.palette.neutralCool};\n`;\nFreeResponseTextArea.displayName = 'OSFreeResponseTextArea';\n\nconst RevertButton = (props: {\n  disabled: boolean\n} & React.ComponentPropsWithoutRef<'button'>) => (\n  <Button {...props}>\n    Cancel\n  </Button>\n);\n\n\nexport const FreeResponseInput = (props: FreeResponseProps) => {\n  const {\n    availablePoints,\n    cancelHandler,\n    defaultValue,\n    infoRowChildren,\n    isSubmitDisabled,\n    question,\n    questionNumber,\n    saveHandler,\n    submitBtnLabel,\n    textHasChanged,\n    wordLimit,\n  } = props;\n\n  const isOverWordLimit = countWords(defaultValue) > wordLimit;\n\n  const questionProps = {};\n  if (questionNumber) { questionProps['data-question-number'] = questionNumber; }\n\n  return (\n    <StyledFreeResponse data-test-id=\"student-free-response\">\n      <div className=\"step-card-body\">\n        <SyledQuestionStem {...questionProps}>\n          {question.stem_html &&\n            <QuestionHtml type=\"stem\" html={question.stem_html} hidden={false} />}\n        </SyledQuestionStem>\n        <FreeResponseTextArea\n          {...props}\n          isOverWordLimit={isOverWordLimit}\n          data-test-id=\"free-response-box\"\n          placeholder=\"Enter your response...\"\n          aria-label=\"question response text box\"\n        />\n        <InfoRow hasChildren={!!infoRowChildren}>\n          {infoRowChildren}\n          <div>\n            <span>{countWords(defaultValue)} words</span>\n            {isOverWordLimit && <span className=\"word-limit-error-info\">Maximum {wordLimit} words</span>}\n          </div>\n        </InfoRow>\n      </div>\n      <StepCardFooter>\n      {availablePoints\n        ? <div className=\"points\"><strong>Points: {availablePoints}</strong></div>\n        : null}\n        <div className=\"controls\">\n          <RevertButton disabled={!textHasChanged} onClick={cancelHandler} />\n          <Button\n            data-test-id=\"submit-answer-btn\"\n            disabled={isSubmitDisabled || isOverWordLimit}\n            onClick={saveHandler}\n          >\n            {submitBtnLabel}\n          </Button>\n        </div>\n      </StepCardFooter>\n    </StyledFreeResponse>\n  );\n}\n\nFreeResponseInput.displayName = 'OSFreeResponse';\n","import React from \"react\";\nimport { numberfyId } from \"../../src/utils\";\nimport { AvailablePoints, ID, ExerciseQuestionData, Task } from \"../types\";\nimport Button from \"./Button\";\nimport { Content } from \"./Content\";\nimport { ExerciseBaseProps } from \"./Exercise\";\nimport { Question } from './Question';\nimport { StepCardFooter } from \"./StepCardFooter\";\n\nexport interface ExerciseQuestionProps {\n  task?: Task;\n  question: ExerciseQuestionData;\n  answer_id_order?: ID[];\n  questionNumber: number;\n  choicesEnabled: boolean;\n  hasMultipleAttempts: boolean;\n  onAnswerChange: () => void;\n  onAnswerSave: ExerciseBaseProps['onAnswerSave'];\n  onNextStep: ExerciseBaseProps['onNextStep'];\n  feedback_html: string;\n  correct_answer_feedback_html: string;\n  is_completed: boolean;\n  correct_answer_id: ID;\n  incorrectAnswerId: ID;\n  answer_id?: ID;\n  attempts_remaining: number;\n  published_comments?: string;\n  detailedSolution?: string;\n  canAnswer: boolean;\n  needsSaved: boolean;\n  canUpdateCurrentStep: boolean;\n  attempt_number: number;\n  apiIsPending: boolean;\n  displaySolution: boolean;\n  available_points?: AvailablePoints;\n  exercise_uid: string;\n  free_response?: string;\n  show_all_feedback?: boolean;\n  tableFeedbackEnabled?: boolean;\n}\n\nconst AttemptsRemaining = ({ count }: { count: number }) => {\n  return (\n    <div>{count} attempt{count === 1 ? '' : 's'} left</div>\n  );\n}\n\nconst PublishedComments = ({ published_comments }: { published_comments?: string }) => {\n  if (!published_comments) { return null; }\n\n  return (\n    <div>\n      <strong>Feedback:</strong> {published_comments}\n    </div>\n  );\n}\n\nexport const SaveButton = (props: {\n  disabled: boolean, isWaiting: boolean, attempt_number: number\n} & React.ComponentPropsWithoutRef<'button'>) => (\n  <Button\n    {...props}\n    waitingText=\"Savingâ€¦\"\n    isWaiting={props.isWaiting}\n    data-test-id=\"submit-answer-btn\"\n  >\n    {props.attempt_number == 0 ? 'Submit' : 'Re-submit'}\n  </Button>\n);\n\nexport const NextButton = (props: {\n  canUpdateCurrentStep: boolean,\n} & React.ComponentPropsWithoutRef<'button'>) => {\n  return (\n    <Button {...props} data-test-id=\"continue-btn\">\n      {props.canUpdateCurrentStep ? 'Continue' : 'Next'}\n    </Button>\n  );\n}\n\nconst FreeResponseReview = ({ free_response }: Pick<ExerciseQuestionProps, \"free_response\">) => {\n  if (!free_response) { return null; }\n  return (\n    <>\n      <div className=\"free-response\">{free_response}</div>\n    </>\n  );\n}\n\nexport const ExerciseQuestion = React.forwardRef((props: ExerciseQuestionProps, ref: React.ForwardedRef<HTMLDivElement>) => {\n  const {\n    question, task, answer_id_order, onAnswerChange, feedback_html, correct_answer_feedback_html,\n    is_completed, correct_answer_id, incorrectAnswerId, choicesEnabled, questionNumber,\n    answer_id, hasMultipleAttempts, attempts_remaining, published_comments, detailedSolution,\n    canAnswer, needsSaved, attempt_number, apiIsPending, onAnswerSave, onNextStep, canUpdateCurrentStep,\n    displaySolution, available_points, free_response, show_all_feedback, tableFeedbackEnabled\n  } = props;\n\n  return (\n    <div data-test-id=\"student-exercise-question\">\n      <Question\n        ref={ref}\n        task={task}\n        question={question}\n        answerIdOrder={answer_id_order}\n        choicesEnabled={choicesEnabled}\n        answer_id={answer_id}\n        questionNumber={questionNumber}\n        onChange={onAnswerChange}\n        feedback_html={feedback_html}\n        correct_answer_feedback_html={correct_answer_feedback_html}\n        correct_answer_id={is_completed ? correct_answer_id : null}\n        incorrectAnswerId={incorrectAnswerId}\n        className=\"step-card-body\"\n        hideAnswers={false}\n        displayFormats={false}\n        displaySolution={displaySolution}\n        show_all_feedback={show_all_feedback}\n        tableFeedbackEnabled={tableFeedbackEnabled}\n      >\n        <FreeResponseReview free_response={free_response} />\n      </Question>\n      <StepCardFooter className=\"step-card-footer\">\n        <div className=\"step-card-footer-inner\">\n          <div className=\"points\">\n            {available_points ? <strong>Points: {available_points}</strong> : null}\n            <span className=\"attempts-left\">\n              {hasMultipleAttempts &&\n                attempts_remaining > 0 &&\n                <AttemptsRemaining count={attempts_remaining} />}\n            </span>\n            <PublishedComments published_comments={published_comments} />\n            {detailedSolution && (<div><strong>Detailed solution:</strong> <Content html={detailedSolution} /></div>)}\n          </div>\n          <div className=\"controls\">\n            {canAnswer && needsSaved ?\n              <SaveButton\n                disabled={apiIsPending || !answer_id}\n                isWaiting={apiIsPending}\n                attempt_number={attempt_number}\n                onClick={() => onAnswerSave(numberfyId(question.id))}\n              /> :\n              <NextButton onClick={() => onNextStep(questionNumber - 1)} canUpdateCurrentStep={canUpdateCurrentStep} />}\n          </div>\n        </div>\n      </StepCardFooter>\n    </div>\n  );\n})\n","import { debounce, once } from 'lodash';\nimport { isEmpty, memoize } from 'lodash/fp.js';\nimport WeakMap from 'weak-map';\n\ndeclare global {\n  interface Window {\n    MathJax?: any;\n    __debugMathJax?: boolean;\n  }\n}\n\nconst MATH_MARKER_BLOCK  = '\\u200c\\u200c\\u200c'; // zero-width non-joiner\nconst MATH_MARKER_INLINE = '\\u200b\\u200b\\u200b'; // zero-width space\n\nconst MATH_RENDERED_CLASS = 'math-rendered';\nconst MATH_MARKED_CLASS = 'math-marked';\nconst MATH_DATA_SELECTOR = `[data-math]:not(.${MATH_RENDERED_CLASS})`;\nconst MATH_ML_SELECTOR   = `math:not(.${MATH_RENDERED_CLASS})`;\nconst COMBINED_MATH_SELECTOR = `${MATH_DATA_SELECTOR}, ${MATH_ML_SELECTOR}`;\nconst MATHJAX_CONFIG = {\n  extensions: [],\n  showProcessingMessages: false,\n  skipStartupTypeset: true,\n  styles: {\n    '#MathJax_MSIE_Frame': {\n      left: '', right: 0, visibility: 'hidden',\n    },\n    '#MathJax_Message': {\n      left: '', right: 0, visibility: 'hidden',\n    },\n  },\n  tex2jax: {\n    displayMath: [[MATH_MARKER_BLOCK, MATH_MARKER_BLOCK]],\n    inlineMath:  [[MATH_MARKER_INLINE, MATH_MARKER_INLINE]],\n  },\n};\n\nconst findProcessedMath = (root: Element): Element[] => Array.from(root.querySelectorAll('.MathJax math'));\nconst findUnprocessedMath = (root: Element): Element[] => {\n  const processedMath = findProcessedMath(root);\n  return Array.from(root.querySelectorAll('math')).filter((node) => processedMath.indexOf(node) === -1);;\n};\n\nconst findLatexNodes = (root: Element): Element[] => {\n  const latexNodes: Element[] = [];\n  for (const node of Array.from(root.querySelectorAll(MATH_DATA_SELECTOR))) {\n    const formula = node.getAttribute('data-math');\n\n    // Set textContent once so that resolveOrWait calls don't\n    // undo a MathJax pass before rendered class is applied\n    if (!node.classList.contains(MATH_MARKED_CLASS)) {\n      node.textContent = (node.tagName.toLowerCase() === 'div')\n        ? `${MATH_MARKER_BLOCK}${formula}${MATH_MARKER_BLOCK}`\n        : `${MATH_MARKER_INLINE}${formula}${MATH_MARKER_INLINE}`;\n      node.classList.add(MATH_MARKED_CLASS);\n    }\n    latexNodes.push(node);\n  }\n\n  return latexNodes;\n};\n\nconst typesetLatexNodes = (latexNodes: Element[], windowImpl: Window) => () => {\n  if (isEmpty(latexNodes)) {\n    return;\n  }\n\n  windowImpl.MathJax.Hub.Queue(\n    () => windowImpl.MathJax.Hub.Typeset(latexNodes),\n    markLatexNodesRendered(latexNodes)\n  );\n};\n\nconst typesetMathMLNodes = (root: Element, windowImpl: Window) => () => {\n  const mathMLNodes = findUnprocessedMath(root);\n\n  if (isEmpty(mathMLNodes)) {\n    return;\n  }\n\n  // style the entire document because mathjax is unable to style individual math elements\n  windowImpl.MathJax.Hub.Queue(\n    () => windowImpl.MathJax.Hub.Typeset(root)\n  );\n};\n\nconst markLatexNodesRendered = (latexNodes: Element[]) => () => {\n  // Queue a call to mark the found nodes as rendered so are ignored if typesetting is called repeatedly\n  // uses className += instead of classList because IE\n  const result = [];\n  for (const node of latexNodes) {\n    result.push(node.className += ` ${MATH_RENDERED_CLASS}`);\n  }\n};\n\n// Search document for math and [data-math] elements and then typeset them\nfunction typesetDocument(root: Element, windowImpl: Window) {\n  const latexNodes = findLatexNodes(root);\n\n  windowImpl.MathJax.Hub.Queue(\n    typesetLatexNodes(latexNodes, windowImpl),\n    typesetMathMLNodes(root, windowImpl)\n  );\n}\n\nconst resolveOrWait = (root: Element, resolve: () => void, remainingTries = 5) => {\n  if (\n    remainingTries > 0\n    && (findLatexNodes(root).length || findUnprocessedMath(root).length)\n  ) {\n    setTimeout(() => {\n      resolveOrWait(root, resolve, remainingTries - 1);\n    }, 200);\n  } else {\n    resolve();\n  }\n};\n\nconst typesetDocumentPromise = (root: Element, windowImpl: Window): Promise<void> => new Promise((resolve) => {\n  typesetDocument(root, windowImpl);\n  windowImpl.MathJax.Hub.Queue(() => {\n    resolveOrWait(root, resolve);\n  });\n});\n\n// memoize'd getter for typeset document function so that each node's\n// typeset has its own debounce\nconst getTypesetDocument = memoize((root, windowImpl) => {\n  // Install a debounce around typesetting function so that it will only run once\n  // every Xms even if called multiple times in that period\n  return debounce(typesetDocumentPromise, 100, {\n    leading: true,\n    trailing: false,\n  }).bind(null, root, windowImpl);\n});\ngetTypesetDocument.cache = new WeakMap();\n\n// typesetMath is the main exported function.\n// It's called by components like HTML after they're rendered\nconst typesetMath = async (root: Element, windowImpl = window) => {\n  await startMathJax();\n\n  // check if MathJax is setup\n  if (!(windowImpl && windowImpl.MathJax && windowImpl.MathJax.Hub)) {\n    console.warn('Warning: Expected MathJax to be initialized.');\n    return Promise.resolve();\n  }\n\n  // schedule a Mathjax pass if there is at least one [data-math] or <math> element present\n  if (root.querySelector(COMBINED_MATH_SELECTOR)) {\n    return getTypesetDocument(root, windowImpl)();\n  }\n\n  return Promise.resolve();\n};\n\nconst startMathJax: (windowImpl?: Window) => Promise<void> = once((windowImpl: Window = window) => new Promise((resolve) => {\n  const configuredCallback = () => {\n    // there doesn't seem to be a config option for this\n    windowImpl.MathJax.HTML.Cookie.prefix = 'mathjax';\n    // proceed with mathjax initi\n    windowImpl.MathJax.Hub.Configured();\n    windowImpl.MathJax.Hub.Register.StartupHook('End', () => {\n      resolve();\n    });\n  };\n\n  if (!document.getElementById('MathJax-Script')) {\n    const script = document.createElement('script');\n    script.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_HTMLorMML-full&delayStartupUntil=configured';\n    script.id = 'MathJax-Script';\n    script.async = true;\n    document.head.appendChild(script);\n  }\n\n  if (windowImpl.MathJax && windowImpl.MathJax.Hub) {\n    windowImpl.MathJax.Hub.Config(MATHJAX_CONFIG);\n    // Does not seem to work when passed to Config\n    windowImpl.MathJax.Hub.processSectionDelay = 0;\n    configuredCallback();\n  } else {\n    // If the MathJax.js file has not loaded yet:\n    // Call MathJax.Configured once MathJax loads and\n    // loads this config JSON since the CDN URL\n    // says to `delayStartupUntil=configured`\n    (MATHJAX_CONFIG as any).AuthorInit = configuredCallback;\n    windowImpl.MathJax = MATHJAX_CONFIG;\n  }\n}));\n\nexport {\n  typesetMath,\n  startMathJax,\n};\n","import { colors, layouts, breakpoints } from \"../../src/theme\";\nimport styled, { css } from \"styled-components\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faBookOpen, faTriangleExclamation } from \"@fortawesome/free-solid-svg-icons\";\nimport { ExerciseIcons } from \"./Exercise\";\n\nexport const StyledToolbar = styled.div<{\n  mobile: boolean;\n  desktop: boolean;\n}>`\n  position: absolute;\n  background: #fff;\n  width: 4.5rem;\n  border: 1px solid ${colors.palette.light};\n  background: #fff;\n  margin: ${layouts.card.spacing} 0 0 ${layouts.card.spacing};\n  z-index: 1;\n\n  > * {\n    height: 4.7rem;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: ${colors.palette.neutral};\n    background: #fff;\n    text-decoration: none;\n\n    &:after {\n      border-bottom: 1px solid #f1f1f1;\n    }\n\n    svg {\n      width: 4.3rem;\n      height: 1.6rem;\n      transition: color 150ms;\n    }\n\n    span {\n      display: none;\n      flex-grow: 1;\n      font-size: 1.4rem;\n      color: ${colors.palette.neutralDarker};\n    }\n\n    &:hover {\n      box-shadow: rgba(0, 0, 0, 0.2) 0px 0px 2px;\n      width: 20rem;\n\n      svg {\n        color: ${colors.palette.neutralDarker};\n      }\n\n      span {\n        display: block;\n      }\n    }\n  }\n\n  ${props => !props.desktop && css`\n    ${breakpoints.desktop`\n      display: none;\n    `}\n    ${breakpoints.tablet`\n      display: none;\n    `}\n  `}\n\n  ${props => props.mobile && breakpoints.mobile`\n    display: block;\n    position: relative;\n    width: auto;\n    display: flex;\n    flex-direction: row;\n    margin: 0;\n\n    &:not(:last-child) {\n      border-bottom: 0;\n    }\n\n    > * {\n      flex-direction: column;\n      flex-grow: 1;\n      align-items: center;\n      justify-content: center;\n      padding: 1rem 1.8rem 0.6rem;\n      height: auto;\n      min-height: 4.8rem;\n\n      &:hover {\n        width: auto;\n      }\n\n      span {\n        display: block;\n        font-size: 1rem;\n        margin-top: 0.2rem;\n        color: ${colors.palette.neutral};\n        text-align: center;\n      }\n\n      & + * {\n        border-left: 1px solid ${colors.palette.light};\n      }\n    }\n  `}\n`;\n\nexport const ExerciseToolbar = ({ icons }: { icons?: ExerciseIcons }) => {\n  if (!icons) {\n    return null;\n  }\n  const settings = Object.values(icons);\n  const mobile = settings.some(({ location }) => location?.toolbar?.mobile ?? true);\n  const desktop = settings.some(({ location }) => location?.toolbar?.desktop ?? false);\n  const topicUrl = icons.topic?.url;\n  const errataUrl = icons.errata?.url;\n\n  return <StyledToolbar {...{ mobile, desktop }}>\n    {topicUrl ? <a href={topicUrl} target=\"_blank\">\n      <FontAwesomeIcon icon={faBookOpen}></FontAwesomeIcon>\n      <span>View topic in textbook</span>\n    </a> : null}\n    {errataUrl ? <a href={errataUrl} target=\"_blank\">\n      <FontAwesomeIcon icon={faTriangleExclamation}></FontAwesomeIcon>\n      <span>Suggest a correction</span>\n    </a> : null}\n  </StyledToolbar>\n};\n","import styled, { css } from 'styled-components';\nimport { breakpoints, colors, mixins } from '../../src/theme';\nimport { ExerciseData } from '../../src/types';\nimport { faBookOpen } from '@fortawesome/free-solid-svg-icons/faBookOpen';\nimport { faTriangleExclamation } from '@fortawesome/free-solid-svg-icons/faTriangleExclamation';\nimport { faCircleInfo } from '@fortawesome/free-solid-svg-icons/faCircleInfo';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { ExerciseIcons } from './Exercise';\n\ntype ExplanationType = 'multiple-choice' | 'two-step';\n\nconst TypeExplanations: { [key in ExplanationType]: string } = {\n  'multiple-choice': 'Select the best answer from the given list of distractors. Your instructor may or may not allow multiple attempts.',\n  'two-step': 'In a two-step question, OpenStax asks for your own answer first, then gives multiple-choice options to help you assess your learnings. \\\nRecalling the answer to a question from memory helps you to retain things longer.',\n}\n\nconst ItemWrapper = styled.div<{ mobile: boolean; desktop: boolean }>`\n  padding: 0.6rem 0.9rem;\n  .popover { display: none; }\n  &:hover {\n    svg path { fill: ${colors.palette.mediumBlue};}\n    .popover { display: flex; }\n  }\n  ${props => !props.desktop && css`\n    ${breakpoints.desktop`\n      display: none;\n    `}\n    ${breakpoints.tablet`\n      display: none;\n    `}\n  `}\n  ${props => !props.mobile && breakpoints.mobile`\n    display: none;\n  `}\n`;\n\nconst InnerWrapper = styled.div`\n  position: relative;\n  display: flex;\n`;\n\nconst Popover = styled.div`\n  ${mixins.popover}\n  top: 3rem;\n  width: 20rem;\n  position: absolute;\n  font-size: 1.2rem;\n  line-height: 1.8rem;\n`;\n\ninterface PopoverItemProps {\n  text: string;\n  children: JSX.Element;\n  wrapperProps?: {\n    as: keyof JSX.IntrinsicElements;\n    href?: string;\n    target?: string;\n  },\n  mobile: boolean;\n  desktop: boolean;\n}\n\nconst PopoverItem = (props: PopoverItemProps) => (\n  <ItemWrapper\n    {...props.wrapperProps}\n    mobile={props.mobile}\n    desktop={props.desktop}\n    aria-label={props.text}\n  >\n    <InnerWrapper>\n      {props.children}\n      <Popover className=\"popover right\">\n        <div className=\"arrow\"></div>\n        <div className=\"content\">{props.text}</div>\n      </Popover>\n    </InnerWrapper>\n  </ItemWrapper>\n);\n\nconst PopoverItemsWrapper = styled.div`\n  max-width: 200px;\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst StyledFontAwesomeIcon = styled(FontAwesomeIcon)`\n  color: ${colors.palette.darkGray};\n  height: 1em;\n`;\n\nexport const ExerciseHeaderIcons = ({ exercise, icons }: {\n  exercise: ExerciseData, icons: ExerciseIcons\n}) => {\n  const defaultHeaderLocation = { desktop: true, mobile: false };\n  const items = [];\n  const isMultipleChoice = exercise.questions.every((q) => q.answers.length > 0);\n  let typeExplanation;\n\n  if (isMultipleChoice && exercise.questions.find((q) => q.formats.includes('free-response'))) {\n    typeExplanation = TypeExplanations['two-step'];\n  } else if (isMultipleChoice) {\n    typeExplanation = TypeExplanations['multiple-choice'];\n  }\n\n  if (icons.topic) {\n    items.push(\n      <PopoverItem\n        key='topic'\n        text='View topic in textbook'\n        wrapperProps={{ as: 'a', href: icons.topic.url, target: '_blank' }}\n        {...icons.topic.location?.header || defaultHeaderLocation}\n      >\n        <StyledFontAwesomeIcon icon={faBookOpen}></StyledFontAwesomeIcon>\n      </PopoverItem>\n    );\n  }\n\n  if (icons.errata) {\n    items.push(\n      <PopoverItem\n        key='errata'\n        text='Suggest a correction'\n        wrapperProps={{ as: 'a', href: icons.errata.url, target: '_blank' }}\n        {...icons.errata.location?.header || defaultHeaderLocation}\n      >\n        <StyledFontAwesomeIcon icon={faTriangleExclamation}></StyledFontAwesomeIcon>\n      </PopoverItem>\n    )\n  }\n\n  if (icons.info && typeExplanation) {\n    items.push(\n      <PopoverItem\n        key='type'\n        text={typeExplanation}\n        {...icons.info.location?.header || defaultHeaderLocation}\n      >\n        <StyledFontAwesomeIcon icon={faCircleInfo} height='16px' width='16px'></StyledFontAwesomeIcon>\n      </PopoverItem>\n    )\n  }\n\n  return (\n    <PopoverItemsWrapper>\n      {items}\n    </PopoverItemsWrapper>\n  );\n};\n","import React from 'react';\nimport scrollToElement from 'scroll-to-element';\nimport styled, { createGlobalStyle, css } from 'styled-components';\nimport { Answer, ExerciseData, ID, QuestionState, StepBase, StepWithData } from '../../src/types';\nimport { InnerStepCard, OuterStepCard, TaskStepCard, TaskStepCardProps } from './Card';\nimport { Content } from './Content';\nimport { ExerciseQuestion } from './ExerciseQuestion';\nimport { typesetMath } from '../helpers/mathjax';\nimport { ExerciseToolbar, StyledToolbar } from './ExerciseToolbar';\nimport { breakpoints } from '../theme';\nimport { ExerciseHeaderIcons } from './ExerciseHeaderIcons';\nimport { TypesetMathContext } from '../hooks/useTypesetMath';\n\nconst StyledTaskStepCard = styled(TaskStepCard)`\n  font-size: calc(1.8rem * var(--content-text-scale));\n  line-height: calc(2.8rem * var(--content-text-scale));\n`;\n\nconst GlobalStyle = createGlobalStyle`\n  :root {\n    --content-text-scale: 1;\n  }\n`;\n\nconst ToolbarWrapper = styled.div<{\n  desktopToolbarEnabled: boolean;\n  mobileToolbarEnabled: boolean;\n}>`\n  ${props => props.desktopToolbarEnabled && css`\n    ${breakpoints.desktop`\n      ${StyledTaskStepCard} {\n        margin-left: 6.8rem;\n      }\n    `}\n    ${breakpoints.tablet`\n      ${StyledTaskStepCard} {\n        margin-left: 4.8rem;\n      }\n    `}\n    ${breakpoints.mobile`\n      ${StyledTaskStepCard} {\n        margin-left: 0;\n      }\n    `}\n  `}\n\n  ${props => props.mobileToolbarEnabled && css`\n    ${breakpoints.mobile`\n      ${StyledToolbar} + ${OuterStepCard} ${InnerStepCard} {\n        border-top-left-radius: 0;\n        border-top-right-radius: 0;\n      }\n    `}\n  `}\n`;\n\nconst TaskStepCardWithToolbar = (props: React.PropsWithChildren<TaskStepCardProps> &\n  Pick<ExerciseBaseProps, 'exerciseIcons'> & {\n    desktopToolbarEnabled: boolean;\n    mobileToolbarEnabled: boolean;\n  }\n) => <ToolbarWrapper\n       desktopToolbarEnabled={props.desktopToolbarEnabled}\n       mobileToolbarEnabled={props.mobileToolbarEnabled}\n     >\n        <ExerciseToolbar icons={props.exerciseIcons} />\n    <StyledTaskStepCard {...props} />\n  </ToolbarWrapper>;\n\nconst Preamble = ({ exercise }: { exercise: ExerciseData }) => {\n  return (\n    <>\n      {exercise.context &&\n        <Content className=\"step-card-body exercise-context\"\n          block html={exercise.context} />}\n\n      {exercise.stimulus_html &&\n        <Content className=\"step-card-body exercise-stimulus\"\n          block html={exercise.stimulus_html} />}\n    </>\n  );\n};\n\ninterface ExerciseIconLocation {\n  desktop: boolean;\n  mobile: boolean;\n}\n\ninterface ExerciseIcon {\n  location?: {\n    /**\n     * @default {\n     *   desktop: true,\n     *   mobile: false\n     * }\n     **/\n    header?: ExerciseIconLocation;\n    /**\n     * @default {\n     *   desktop: false,\n     *   mobile: true\n     * }\n     **/\n    toolbar?: ExerciseIconLocation;\n  }\n}\n\nexport interface ExerciseIcons {\n  /** An object containing a URL for the errata form for this exercise and settings for rendering the icon. */\n  errata?: ExerciseIcon & { url: string };\n  /** An object containing a URL for textbook content relevant to the exercise and settings for rendering the icon. */\n  topic?: ExerciseIcon & { url: string };\n  /** An object of settings for rendering the info icon that describes the exercise type (multiple-choice, two-step, etc.) */\n  info?: ExerciseIcon;\n}\n\nexport interface ExerciseBaseProps {\n  /** An object containing a Step ID and Exercise UID */\n  step: StepBase;\n  /** An exercise object from the Exercises API */\n  exercise: ExerciseData;\n  numberOfQuestions: number;\n  /** The current question index. For multipart questions this is the first question number.  */\n  questionNumber: number;\n  /** A boolean that enables showing the amount of attempts remaining. */\n  hasMultipleAttempts: boolean;\n  /** A callback with the question_id when the Submit/Re-submit button is clicked. */\n  onAnswerSave: (question_id: number) => void;\n  /** A callback with the current question index when the Next/Continue button is clicked. */\n  onNextStep: (currentIndex: number) => void;\n  /** A boolean that enables always showing every answer feedback_html field. */\n  show_all_feedback?: boolean;\n  /** The question number to scroll into view when the component renders. */\n  scrollToQuestion?: number;\n  /** An object containing data for how to render the following icons:\n   * - An errata icon linking to the errata/feedback form\n   * - An info icon describing the exercise type (multiple-choice, two-step, etc.)\n   * - A topic icon linking to the relevant textbook location\n   */\n  exerciseIcons?: ExerciseIcons;\n}\n\nexport interface ExerciseWithStepDataProps extends ExerciseBaseProps {\n  /** A Tutor Step object */\n  step: StepWithData;\n  canAnswer: boolean;\n  needsSaved: boolean;\n  apiIsPending: boolean;\n  onAnswerChange: (answer: Answer) => void;\n  canUpdateCurrentStep: boolean;\n  answer_id_order?: ID[];\n}\n\nexport interface ExerciseWithQuestionStatesProps extends ExerciseBaseProps {\n  questionStates: { [key: ID]: QuestionState };\n  /** A callback with the IDs of the answer and question */\n  onAnswerChange: (answer: Omit<Answer, 'id'> & { id: number, question_id: number }) => void;\n}\n\nexport const Exercise = styled(({\n  numberOfQuestions, questionNumber, step, exercise, show_all_feedback, scrollToQuestion, exerciseIcons, ...props\n}: { className?: string } & (ExerciseWithStepDataProps | ExerciseWithQuestionStatesProps)) => {\n  const legacyStepRender = 'feedback_html' in step;\n  const questionsRef = React.useRef<Array<HTMLDivElement>>([]);\n  const container = React.useRef<HTMLDivElement>(null);\n\n  const typesetExercise = React.useCallback(() => {\n    if (container.current) {\n      typesetMath(container.current);\n    }\n  }, []);\n\n  React.useEffect(() => {\n    const el = scrollToQuestion && questionsRef.current[scrollToQuestion];\n    if (el) {\n      scrollToElement(el);\n    }\n  }, [scrollToQuestion, exercise]);\n\n  const desktopToolbarEnabled = Object.values(exerciseIcons || {}).some(({ location }) => location?.toolbar?.desktop);\n  const mobileToolbarEnabled = Object.values(exerciseIcons || {}).some(({ location }) => location?.toolbar?.mobile);\n\n  return <TypesetMathContext.Provider value={typesetExercise}>\n    <GlobalStyle />\n    <TaskStepCardWithToolbar\n      step={step}\n      questionNumber={questionNumber}\n      numberOfQuestions={legacyStepRender ? numberOfQuestions : exercise.questions.length}\n      rightHeaderChildren={exerciseIcons ? <ExerciseHeaderIcons exercise={exercise} icons={exerciseIcons} /> : null}\n      showTotalQuestions={legacyStepRender}\n      desktopToolbarEnabled={desktopToolbarEnabled}\n      mobileToolbarEnabled={mobileToolbarEnabled}\n      {...(exerciseIcons ? { exerciseIcons: exerciseIcons } : null)}\n      className={props.className}\n    >\n      <div ref={container}>\n        <Preamble exercise={exercise} />\n\n        {exercise.questions.map((q, i) => {\n          const state = { ...(legacyStepRender ? step : props['questionStates'][q.id]) };\n          return (\n            <ExerciseQuestion\n              {...props}\n              {...{...state, available_points: undefined}}\n              ref={(el: HTMLDivElement) => questionsRef.current[questionNumber + i] = el}\n              exercise_uid={exercise.uid}\n              key={q.id}\n              question={q}\n              questionNumber={questionNumber + i}\n              choicesEnabled={state.canAnswer}\n              displaySolution={true}\n              detailedSolution={state.solution?.content_html}\n              show_all_feedback={show_all_feedback}\n              tableFeedbackEnabled={show_all_feedback && !legacyStepRender}\n              canUpdateCurrentStep={\n                // misleading prop name, we want to show a continue button for completed questions\n                // that aren't the last question, which requires this prop to be true\n                'canUpdateCurrentStep' in props ?\n                  props.canUpdateCurrentStep : !(i + 1 === exercise.questions.length)\n              }\n            />\n          )\n        }\n        )}\n      </div>\n    </TaskStepCardWithToolbar>\n  </TypesetMathContext.Provider>;\n})`\n`;\n","const SvgComponent = () => (\n  <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n  <path d=\"M14.556 2.09149C15.2296 1.78355 16 2.26721 16 2.99824V10.5951C16 10.9241 15.8362 11.2328 15.5605 11.4188C14.4229 12.1864 13.2007 12.6956 11.6715 12.6956C9.53267 12.6956 8.12768 11.6087 6.42651 11.6087C4.81213 11.6087 3.69241 11.923 2.79365 12.3V15.25C2.79365 15.6642 2.45254 16 2.03175 16H1.52381C1.10302 16 0.761905 15.6642 0.761905 15.25V3.18577C0.301492 2.86952 0 2.34455 0 1.74999C0 0.75924 0.836349 -0.0391985 1.852 0.00148899C2.75575 0.0376765 3.49578 0.75049 3.55203 1.63912C3.56854 1.8998 3.52632 2.1488 3.43819 2.37543C4.09648 2.13699 4.80613 1.99999 5.59835 1.99999C7.73718 1.99999 9.14216 3.08696 10.8433 3.08696C12.1289 3.08696 13.4659 2.5899 14.556 2.09149ZM2.79365 4.20718V6.40999C3.71429 6.07656 4.41841 5.85281 5.13016 5.75656V3.51999C4.38413 3.5878 3.84635 3.82593 2.79365 4.20718ZM9.80317 4.49437C8.96454 4.34837 8.21949 4.05752 7.46667 3.82749V5.93437C8.23413 6.14393 8.9767 6.44824 9.80317 6.63156V4.49437ZM5.13016 5.75656V7.94531C6.1713 7.85224 6.84159 7.92546 7.46667 8.06406V5.93437C6.66517 5.71452 5.98791 5.6399 5.13016 5.75656ZM7.46667 10.2012C8.30279 10.3466 9.04546 10.6365 9.80317 10.8681V8.76156C9.03248 8.55074 8.29397 8.24749 7.46667 8.06406V10.2012ZM2.79365 10.6906C3.54349 10.4284 4.31079 10.2581 5.13016 10.1731V7.94531C4.30127 8.01874 3.62667 8.19656 2.79365 8.48781V10.6906ZM14.4762 3.76562C13.8 4.04218 12.9971 4.31687 12.1397 4.4678V6.71499C13.0067 6.57874 13.7279 6.27437 14.4762 5.96843V3.76562ZM14.4762 10.3269V8.12406C13.7717 8.56781 12.9276 8.83062 12.1397 8.93718V11.1741C12.9356 11.0997 13.679 10.8291 14.4762 10.3269ZM9.80317 6.63156V8.76156C10.6179 8.9845 11.283 9.05349 12.1397 8.93718V6.71499C11.3143 6.84584 10.5542 6.79862 9.80317 6.63156Z\" fill=\"currentColor\"/>\n  </svg>\n);\nexport default SvgComponent;\n","import styled, { css } from 'styled-components';\nimport { colors, breakpoints } from '../theme';\nimport FlagIcon from '../assets/flag';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCheck } from '@fortawesome/free-solid-svg-icons/faCheck';\nimport { faXmark } from '@fortawesome/free-solid-svg-icons/faXmark';\n\nconst ProgressBarWrapper = styled.nav`\n  display: flex;\n  justify-content: flex-start;\n  flex-wrap: wrap;\n  padding: 2rem;\n  ${breakpoints.mobile`\n    padding: 0;\n  `}\n`;\n\nconst StyledItemWrapper = styled.span`\n  display: flex;\n  align-items: center;\n  margin: 0 1rem 1rem 0;\n  position: relative;\n\n  &:last-child {\n    margin-right: 0;\n  }\n`;\n\nconst handleVariant = (variant: ProgressBarItemVariant) => {\n  switch (variant) {\n    case 'isStatus':\n      return css`\n        background-color: ${colors.palette.neutralBright};\n      `;\n    case 'isCorrect':\n      return css`\n        color: ${colors.answer.correct};\n        background-color: #E8F4D8;\n      `;\n    case 'isIncorrect':\n      return css`\n        color: ${colors.answer.incorrect};\n        background-color: #F8E8EA;\n      `;\n    default:\n      return css`\n        background-color: ${colors.palette.neutralBright};\n      `;\n  }\n};\n\nconst shadowCss = 'box-shadow: 0px 1px 4px 0px #00000066;';\n\nexport const StyledItem = styled.button<{ variant: ProgressBarItemVariant, isActive: boolean }>`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: ${props => props.isActive ? '4rem' : '3.2rem'};\n  height: ${props => props.isActive ? '4rem' : '3.2rem'};\n  border: 0;\n  border-radius: 50%;\n  margin: ${props => props.isActive ? '0' : '0 0.3rem'};\n  font-size: 1.4rem;\n  font-weight: bold;\n  cursor: pointer;\n  color: ${colors.palette.neutralDarker};\n  ${props => props.isActive ? css`\n    ${shadowCss}\n    & + [data-icon] {\n      bottom: 0;\n      right: 0;\n    }\n  ` : null}\n  ${props => handleVariant(props.variant)}\n  &:hover {\n    ${shadowCss}\n  }\n`;\n\nconst StyledFontAwesomeIcon = styled(FontAwesomeIcon)`\n  background: ${props => props.color};\n  color: #fff;\n  position: absolute;\n  bottom: 0.4rem;\n  right: 0.3rem;\n  height: 0.8rem;\n  width: 0.8rem;\n  padding: 0.1rem;\n  font-size: 1.2rem;\n  border-radius: 50%;\n`;\n\nconst ItemIcon = ({ variant }: { variant: ProgressBarItemVariant }) => {\n  if (!variant || variant !== 'isCorrect' && variant !== 'isIncorrect') {\n    return null;\n  }\n\n  const variantData = {\n    isCorrect: {\n      icon: faCheck,\n      color: colors.answer.correct,\n    },\n    isIncorrect: {\n      icon: faXmark,\n      color: colors.answer.incorrect,\n    },\n  }[variant];\n\n  return <StyledFontAwesomeIcon\n    icon={variantData.icon}\n    color={variantData.color}\n    height='16px'\n    width='16px'\n  />;\n}\n\nexport interface ProgressBarProps<S extends {variant: ProgressBarItemVariant}> {\n  steps: S[];\n  activeIndex: number | null;\n  goToStep: (index: number, step: S) => void;\n}\n\nexport interface ProgressBarItemProps<S> {\n  index: number;\n  isActive: boolean;\n  step: S;\n  goToStep: (index: number, step: S) => void;\n}\n\nexport type ProgressBarItemVariant = 'isCorrect' | 'isIncorrect' | 'isStatus' | null;\n\nexport const ProgressBarItem = <S extends {variant: ProgressBarItemVariant}>({index, isActive, step, goToStep}: ProgressBarItemProps<S>) =>\n  <StyledItemWrapper>\n    <StyledItem\n      variant={step.variant}\n      isActive={isActive}\n      onClick={() => goToStep(index, step)}\n      aria-current={isActive ? 'location' : 'false'}\n      aria-label={step.variant === 'isStatus' ? 'Assignment status' : `Question ${index + 1}` }\n    >\n      {step.variant === 'isStatus' ? <FlagIcon /> : index + 1}\n    </StyledItem>\n    <ItemIcon variant={step.variant} />\n  </StyledItemWrapper>;\n\nexport const ProgressBar = <S extends {variant: ProgressBarItemVariant}>({ steps, activeIndex, goToStep }: ProgressBarProps<S>) =>\n  <ProgressBarWrapper aria-label=\"Breadcrumbs\">\n    {steps.map((step, index) => <ProgressBarItem\n      key={index}\n      index={index}\n      isActive={index === activeIndex}\n      step={step}\n      goToStep={goToStep}\n    />)}\n  </ProgressBarWrapper>;\n","import { BulletList } from \"react-content-loader\";\nimport { colors } from \"../../src/theme\";\nimport styled from \"styled-components\";\n\nconst Wrapper = styled.div`\n  max-width: 1000px;\n  @media(min-width: 960px) {\n    // Around the height of a multiple choice with 4 options\n    min-height: 53.8rem;\n  }\n  padding: 2rem;\n  margin: 2rem;\n  border: 1px solid ${colors.palette.light};\n  border-radius: 0.25rem;\n  background-color: white;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  > svg {\n    max-width: 600px;\n    flex-grow: 1;\n  }\n`;\n\nexport const Loader = () => <Wrapper><BulletList uniqueKey=\"OSLoader\" /></Wrapper>;\n"],"names":["ALPHABET","isAnswerIncorrect","answer","incorrectAnswerId","id","countWords","text","words","trim","match","length","_templateObject","_templateObject2","_templateObject3","_templateObject4","_templateObject5","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","_templateObject11","_templateObject12","TypesetMathContext","React","createContext","Error","Content","_ref","html","component","_ref$block","block","props","_objectWithoutPropertiesLoose","_excluded","typesetMath","useContext","useEffect","undefined","cloneElement","_extends","_jsx","jsx","dangerouslySetInnerHTML","__html","SimpleFeedback","children","contentRenderer","className","classnames","Feedback","wrapperClasses","position","_jsxs","palette","red","danger","darkRed","lightRed","green","lightGreen","darkGreen","paleYellow","teal","blue","mediumBlue","lightBlue","neutralLightBlue","tangerine","gray","darkGray","pale","light","white","neutralLightest","neutralCool","neutralBright","neutralLighter","neutralLight","neutralMedium","neutral","neutralThin","neutralDark","neutralFeedback","neutralDarker","black","orange","colors","hover","checked","correct","incorrect","popover","arrowOuterColor","borderColor","card","header","background","body","button","backgroundHover","backgroundActive","freeResponse","color","layouts","BREAKPOINTS","breakpoints","mobile","css","_taggedTemplateLiteralLoose","apply","slice","call","arguments","desktop","transitions","mixins","answerColor","invertBubble","answerChecked","answerCorrect","answerIncorrect","answerHover","answerCorrectAnswer","resetText","stepCardPadding","StyledAnswerIndicator","styled","div","state","AnswerIndicator","isCorrect","isIncorrect","Answer","feedback","selectedCount","onChangeAnswer","radioBox","type","iter","disabled","onKeyPress","qid","answerId","correctAnswerId","hasCorrectAnswer","answered_count","show_all_feedback","tableFeedbackEnabled","isChecked","isAnswerChecked","correctness","isAnswerCorrect","classes","cn","correctIncorrectIcon","ariaLabel","onChange","name","feedback_html","percent","selected_count","Math","round","jsxs","content_html","_Fragment","htmlFor","onClick","displayName","AnswersTable","idCounter","question","_props$type","correct_answer_id","correct_answer_feedback_html","_props$show_all_feedb","answerIdOrder","instructions","hideAnswers","idOrder","questionAnswerProps","answer_id","defaultAnswerType","choicesEnabled","answersHtml","answers","sort","a","b","indexOf","map","i","additionalProps","question_id","parseInt","key","answerProps","Object","assign","push","index","forEach","item","spliceIndex","splice","InnerStepCard","OuterStepCard","StepCardHeader","StepCardQuestion","StepCard","questionNumber","numberOfQuestions","showTotalQuestions","stepType","isHomework","availablePoints","unpadded","questionId","multipartBadge","leftHeaderChildren","rightHeaderChildren","headerTitleChildren","otherProps","TaskStepCard","_ref2","step","_excluded2","task","uid","StyledButton","Button","isWaiting","waitingText","GlobalStyle","createGlobalStyle","CompletionStatusCard","CompletionHeader","h2","CompletionStatus","numberCompleted","handleClick","allCompleted","someCompleted","buttonText","Fragment","split","toLowerCase","StyledQuestion","Question","forwardRef","ref","exerciseUid","solution","exercise_uid","context","hidePreambles","stem_html","_question$collaborato","collaborator_solutions","formats","stimulus_html","is_deleted","_question$collaborato2","displaySolution","find","s","hasSolution","join","QuestionHtml","hidden","displayFormats","FormatsListing","_props$html","_ref$formats","format","StepCardFooter","TextAreaErrorStyle","StyledFreeResponse","SyledQuestionStem","InfoRow","hasChildren","FreeResponseTextArea","textarea","isOverWordLimit","readOnly","RevertButton","FreeResponseInput","cancelHandler","defaultValue","infoRowChildren","isSubmitDisabled","saveHandler","submitBtnLabel","textHasChanged","wordLimit","questionProps","placeholder","AttemptsRemaining","count","PublishedComments","published_comments","SaveButton","attempt_number","NextButton","canUpdateCurrentStep","FreeResponseReview","_ref3","free_response","ExerciseQuestion","hasMultipleAttempts","attempts_remaining","detailedSolution","canAnswer","needsSaved","apiIsPending","onAnswerSave","onNextStep","available_points","answer_id_order","onAnswerChange","is_completed","MATH_MARKER_BLOCK","MATH_MARKER_INLINE","MATH_MARKED_CLASS","MATHJAX_CONFIG","extensions","showProcessingMessages","skipStartupTypeset","styles","left","right","visibility","tex2jax","displayMath","inlineMath","findUnprocessedMath","root","processedMath","Array","from","querySelectorAll","findProcessedMath","filter","node","findLatexNodes","latexNodes","_i","_Array$from","formula","getAttribute","classList","contains","textContent","tagName","add","resolveOrWait","resolve","remainingTries","setTimeout","typesetDocumentPromise","windowImpl","Promise","MathJax","Hub","Queue","isEmpty","Typeset","_step","result","_iterator","_createForOfIteratorHelperLoose","done","value","markLatexNodesRendered","typesetLatexNodes","mathMLNodes","typesetMathMLNodes","typesetDocument","getTypesetDocument","memoize","debounce","leading","trailing","bind","cache","WeakMap","startMathJax","once","window","configuredCallback","HTML","Cookie","prefix","Configured","Register","StartupHook","document","getElementById","script","createElement","src","async","head","appendChild","Config","processSectionDelay","AuthorInit","StyledToolbar","ExerciseToolbar","_icons$topic","_icons$errata","icons","settings","values","some","_location$toolbar$mob","_location$toolbar","location","toolbar","_location$toolbar$des","_location$toolbar2","topicUrl","topic","url","errataUrl","errata","href","target","FontAwesomeIcon","icon","faBookOpen","faTriangleExclamation","ItemWrapper","InnerWrapper","Popover","PopoverItem","wrapperProps","PopoverItemsWrapper","StyledFontAwesomeIcon","ExerciseHeaderIcons","typeExplanation","_icons$topic$location","_icons$errata$locatio","_icons$info$location","exercise","defaultHeaderLocation","items","isMultipleChoice","questions","every","q","includes","as","info","faCircleInfo","height","width","StyledTaskStepCard","ToolbarWrapper","desktopToolbarEnabled","mobileToolbarEnabled","TaskStepCardWithToolbar","exerciseIcons","Preamble","Exercise","scrollToQuestion","legacyStepRender","questionsRef","useRef","container","typesetExercise","useCallback","current","then","querySelector","MATH_DATA_SELECTOR","console","warn","e","reject","el","scrollToElement","_ref4","Provider","_state$solution","_createElement","SvgComponent","viewBox","fill","xmlns","d","ProgressBarWrapper","nav","StyledItemWrapper","span","shadowCss","StyledItem","isActive","variant","handleVariant","ItemIcon","variantData","faCheck","faXmark","ProgressBarItem","goToStep","FlagIcon","Wrapper","BulletList","uniqueKey","activeIndex","steps"],"mappings":"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"}